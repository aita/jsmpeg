/**
 * jsmpeg - A MPEG1 Video Decoder in JavaScript
 * @version v1.0.0
 * @link https://github.com/aita/jsmpeg-inline
 * @license MIT
 *
 * Based on jsmpeg by Dominic Szablewski - phoboslab.org
 * https://github.com/phoboslab
 *
 * Based on Java MPEG-1 Video Decoder and Player
 * http://sourceforge.net/projects/javampeg1video/
 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.jsmpeg=t()}}(function(){var t;return function e(t,i,r){function s(n,a){if(!i[n]){if(!t[n]){var h="function"==typeof require&&require;if(!a&&h)return h(n,!0);if(o)return o(n,!0);var d=new Error("Cannot find module '"+n+"'");throw d.code="MODULE_NOT_FOUND",d}var c=i[n]={exports:{}};t[n][0].call(c.exports,function(e){var i=t[n][1][e];return s(i?i:e)},c,c.exports,e,t,i,r)}return i[n].exports}for(var o="function"==typeof require&&require,n=0;n<r.length;n++)s(r[n]);return s}({1:[function(t,e,i){var r=t("eventemitter2").EventEmitter2,s=t("inherits"),o=t("./VideoLoader.js"),n=(t("./BitReader.js"),t("./Decoder.js")),a=t("./ScrollWatcher.js"),h=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),d=function(){return window.performance&&window.performance.now?window.performance.now():Date.now()},c=e.exports=function(t,e){e=e||{},this.url=t,this.videoIndex=0,this.el=this.canvas=e.canvas||document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.videoLoader=new o,this.autoplay=!!e.autoplay,this.autoplayOnScroll=!!e.autoplayOnScroll,this.preload=e.preload||"auto",this.repeat=!!e.repeat,this.decoder=new n(this.canvas),this.currentTime=0,this.on("show",this.play.bind(this)),this.on("unshow",this.pause.bind(this)),"none"!=this.preload&&this.doPreload(e.preloadTimeout),"scroll"==this.autoplay?a.add(this):this.autoplay&&this.load()};s(c,r),e.exports.ScrollWatcher=a,c.prototype.doPreload=function(t){if("meta"!==this.preload){if("auto"===this.preload&&this.videoLoader.add(this.url),"number"==typeof this.preload)if(this.preload>0&&Array.isArray(this.url)){var e=this.url.slice(0,this.preload);this.videoLoader.add(e)}else this.videoLoader.add(this.url);this.videoLoader.once("load",function(t){this.emit("preload"),this.loadVideo(t)}.bind(this)),"undefined"!=typeof t&&this.videoLoader.once("timeout",function(){this.emit("preloadTimeout")}.bind(this)),this.videoLoader.load(t)}},c.prototype.load=function(){this.playing||this.videoLoader.once("load",function(t){this.loadVideo(t)}.bind(this)),this.videoLoader.add(this.url),this.videoLoader.load()},c.prototype.loadVideo=function(t){this.videoIndex=t.index,this.decoder.loadBuffer(t.data),this.processFrame(),this.autoplay&&this.play()},c.prototype.play=function(){this.playing||(this.emit("play"),this.playing=!0,this.load(),this.animate())},c.prototype.pause=function(){this.playing&&(this.emit("pause"),this.playing=!1)},c.prototype.stop=function(){this.emit("stop"),this.loadVideo(this.videoLoader.findByIndex(0)),this.playing=!1},c.prototype.processFrame=function(){if(this.decoder.nextFrame())this.ctx.drawImage(this.decoder.canvas,0,0,this.decoder.width,this.decoder.height,0,0,this.canvas.width,this.canvas.height);else{var t=this.videoLoader.findByIndex(this.videoIndex+1);t?"loaded"===t.status?this.loadVideo(t):(this.pause(),this.videoLoader.once("load",function(t){t&&(this.loadVideo(t),this.play())}.bind(this)),"loading"!=t.status&&this.load()):(this.emit("ended"),this.repeat?(t=this.videoLoader.findByIndex(0),this.loadVideo(t)):this.stop())}},c.prototype.animate=function(){if(this.playing){var t=d();this.lastTime||(this.lastTime=t);var e=1e3/this.decoder.pictureRate,i=t-this.lastTime;i>e&&(this.processFrame(),this.lastTime=t-i%e,this.currentTime+=e,this.emit("timeupdate")),h(this.animate.bind(this))}}},{"./BitReader.js":2,"./Decoder.js":4,"./ScrollWatcher.js":5,"./VideoLoader.js":6,eventemitter2:9,inherits:10}],2:[function(t,e,i){var r=e.exports=function(t){this.bytes=new Uint8Array(t),this.length=this.bytes.length,this.writePos=this.bytes.length,this.index=0};r.NOT_FOUND=-1,r.prototype.findNextMPEGStartCode=function(){for(var t=this.index+7>>3;t<this.writePos;t++)if(0==this.bytes[t]&&0==this.bytes[t+1]&&1==this.bytes[t+2])return this.index=t+4<<3,this.bytes[t+3];return this.index=this.writePos<<3,r.NOT_FOUND},r.prototype.nextBytesAreStartCode=function(){var t=this.index+7>>3;return t>=this.writePos||0==this.bytes[t]&&0==this.bytes[t+1]&&1==this.bytes[t+2]},r.prototype.nextBits=function(t){var e=this.index>>3,i=8-this.index%8;if(i>=t)return this.bytes[e]>>i-t&255>>8-t;var r=(this.index+t)%8,s=this.index+t-1>>3,o=this.bytes[e]&255>>8-i;for(e++;s>e;e++)o<<=8,o|=this.bytes[e];return r>0?(o<<=r,o|=this.bytes[e]>>8-r):(o<<=8,o|=this.bytes[e]),o},r.prototype.getBits=function(t){var e=this.nextBits(t);return this.index+=t,e},r.prototype.advance=function(t){return this.index+=t},r.prototype.rewind=function(t){return this.index-=t}},{}],3:[function(t,e,i){var r=t("./utils.js"),s=e.exports=function(t,e){this.decoder=t,this.canvas=e,this.ctx=this.canvas.getContext("2d")};s.prototype.init=function(){this.imageData=this.ctx.getImageData(0,0,this.decoder.width,this.decoder.height),r.fillArray(this.imageData.data,255)},s.prototype.render=function(t,e,i){this.YCbCrToRGBA(t,e,i),this.ctx.putImageData(this.imageData,0,0)},s.prototype.YCbCrToRGBA=function(t,e,i){for(var r,s,o,n,a,h=this.imageData.data,d=0,c=this.decoder.codedWidth,f=this.decoder.codedWidth+(this.decoder.codedWidth-this.decoder.width),l=0,u=this.decoder.halfWidth-(this.decoder.width>>1),p=0,m=4*this.decoder.width,v=4*this.decoder.width,y=this.decoder.width>>1,w=this.decoder.height>>1,b=0;w>b;b++){for(var g=0;y>g;g++){r=e[l],s=i[l],l++,o=s+(103*s>>8)-179,n=(88*r>>8)-44+(183*s>>8)-91,a=r+(198*r>>8)-227;var _=t[d++],C=t[d++];h[p]=_+o,h[p+1]=_-n,h[p+2]=_+a,h[p+4]=C+o,h[p+5]=C-n,h[p+6]=C+a,p+=8;var x=t[c++],T=t[c++];h[m]=x+o,h[m+1]=x-n,h[m+2]=x+a,h[m+4]=T+o,h[m+5]=T-n,h[m+6]=T+a,m+=8}d+=f,c+=f,p+=v,m+=v,l+=u}}},{"./utils.js":8}],4:[function(t,e,i){var r=t("./BitReader.js"),s=t("./WebGLRenderer.js"),o=t("./CanvasRenderer.js"),n=t("./utils.js"),a=e.exports=function(t){if(t=t||{},this.canvas=document.createElement("canvas"),!t.forceCanva2D){var e=new s(this,this.canvas);e.initGL()&&(this.renderer=e)}this.renderer||(this.renderer=new o(this,this.canvas)),this.customIntraQuantMatrix=new Uint8Array(64),this.customNonIntraQuantMatrix=new Uint8Array(64),this.blockData=new Int32Array(64),this.zeroBlockData=new Int32Array(64),n.fillArray(this.zeroBlockData,0),this.pictureCodingType=0,this.fullPelForward=!1,this.forwardFCode=0,this.forwardRSize=0,this.forwardF=0,this.quantizerScale=0,this.sliceBegin=!1,this.macroblockAddress=0,this.mbRow=0,this.mbCol=0,this.macroblockType=0,this.macroblockIntra=!1,this.macroblockMotFw=!1,this.motionFwH=0,this.motionFwV=0,this.motionFwHPrev=0,this.motionFwVPrev=0,this.cachedFrameCount=0};a.prototype.renderFrame=function(t,e,i){this.renderer.render(t,e,i)},a.prototype.nextFrame=function(){if(!this.buffer)return!1;for(;;){var t=this.getStartCode();if(t==E)this.decodeSequenceHeader();else{if(t==B)return this.decodePicture(),!0;if(t==r.NOT_FOUND)return!1}}},a.prototype.decodeSequenceHeader=function(){if(this.width=this.buffer.getBits(12),this.height=this.buffer.getBits(12),this.buffer.advance(4),this.pictureRate=h[this.buffer.getBits(4)],this.buffer.advance(30),this.initBuffers(),this.renderer.init(),this.buffer.getBits(1)){for(var t=0;64>t;t++)this.customIntraQuantMatrix[d[t]]=this.buffer.getBits(8);this.intraQuantMatrix=this.customIntraQuantMatrix}if(this.buffer.getBits(1)){for(var e=0;64>t;t++)this.customNonIntraQuantMatrix[d[e]]=this.buffer.getBits(8);this.nonIntraQuantMatrix=this.customNonIntraQuantMatrix}},a.prototype.initBuffers=function(){this.intraQuantMatrix=c,this.nonIntraQuantMatrix=f,this.mbWidth=this.width+15>>4,this.mbHeight=this.height+15>>4,this.mbSize=this.mbWidth*this.mbHeight,this.codedWidth=this.mbWidth<<4,this.codedHeight=this.mbHeight<<4,this.codedSize=this.codedWidth*this.codedHeight,this.halfWidth=this.mbWidth<<3,this.halfHeight=this.mbHeight<<3,this.quarterSize=this.codedSize>>2,this.sequenceStarted||(this.sequenceStarted=!0,this.Y=new n.MaybeClampedUint8Array(this.codedSize),this.Y32=new Uint32Array(this.Y.buffer),this.Cr=new n.MaybeClampedUint8Array(this.codedSize>>2),this.Cr32=new Uint32Array(this.Cr.buffer),this.Cb=new n.MaybeClampedUint8Array(this.codedSize>>2),this.Cb32=new Uint32Array(this.Cb.buffer),this.forwardY=new n.MaybeClampedUint8Array(this.codedSize),this.forwardY32=new Uint32Array(this.forwardY.buffer),this.forwardCr=new n.MaybeClampedUint8Array(this.codedSize>>2),this.forwardCr32=new Uint32Array(this.forwardCr.buffer),this.forwardCb=new n.MaybeClampedUint8Array(this.codedSize>>2),this.forwardCb32=new Uint32Array(this.forwardCb.buffer),this.canvas.width=this.width,this.canvas.height=this.height)},a.prototype.loadBuffer=function(t){this.buffer=new r(t),this.findStartCode(E),this.firstSequenceHeader=this.buffer.index,this.decodeSequenceHeader()},a.prototype.getStartCode=function(){return this.buffer.findNextMPEGStartCode()},a.prototype.decodePicture=function(t){if(this.buffer.advance(10),this.pictureCodingType=this.buffer.getBits(3),this.buffer.advance(16),!(this.pictureCodingType<=0||this.pictureCodingType>=A)){if(this.pictureCodingType==T){if(this.fullPelForward=this.buffer.getBits(1),this.forwardFCode=this.buffer.getBits(3),0==this.forwardFCode)return;this.forwardRSize=this.forwardFCode-1,this.forwardF=1<<this.forwardRSize}var e=0;do e=this.buffer.findNextMPEGStartCode();while(e==R||e==P);for(;e>=F&&D>=e;)this.decodeSlice(255&e),e=this.buffer.findNextMPEGStartCode();if(this.buffer.rewind(32),t!=C&&(this.renderFrame(this.Y,this.Cb,this.Cr),this.externalDecodeCallback&&this.externalDecodeCallback(this,this.canvas)),this.pictureCodingType==x||this.pictureCodingType==T){var i=this.forwardY,r=this.forwardY32,s=this.forwardCr,o=this.forwardCr32,n=this.forwardCb,a=this.forwardCb32;this.forwardY=this.Y,this.forwardY32=this.Y32,this.forwardCr=this.Cr,this.forwardCr32=this.Cr32,this.forwardCb=this.Cb,this.forwardCb32=this.Cb32,this.Y=i,this.Y32=r,this.Cr=s,this.Cr32=o,this.Cb=n,this.Cb32=a}}},a.prototype.decodeSlice=function(t){for(this.sliceBegin=!0,this.macroblockAddress=(t-1)*this.mbWidth-1,this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0,this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.quantizerScale=this.buffer.getBits(5);this.buffer.getBits(1);)this.buffer.advance(8);do this.decodeMacroblock();while(!this.buffer.nextBytesAreStartCode())},a.prototype.decodeMacroblock=function(){for(var t=0,e=this.readCode(u);34==e;)e=this.readCode(u);for(;35==e;)t+=33,e=this.readCode(u);if(t+=e,this.sliceBegin)this.sliceBegin=!1,this.macroblockAddress+=t;else{if(this.macroblockAddress+t>=this.mbSize)return;for(t>1&&(this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.pictureCodingType==T&&(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0));t>1;)this.macroblockAddress++,this.mbRow=this.macroblockAddress/this.mbWidth|0,this.mbCol=this.macroblockAddress%this.mbWidth,this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb),t--;this.macroblockAddress++}this.mbRow=this.macroblockAddress/this.mbWidth|0,this.mbCol=this.macroblockAddress%this.mbWidth,this.macroblockType=this.readCode(S[this.pictureCodingType]),this.macroblockIntra=1&this.macroblockType,this.macroblockMotFw=8&this.macroblockType,0!=(16&this.macroblockType)&&(this.quantizerScale=this.buffer.getBits(5)),this.macroblockIntra?(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0):(this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.decodeMotionVectors(),this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb));for(var i=0!=(2&this.macroblockType)?this.readCode(y):this.macroblockIntra?63:0,r=0,s=32;6>r;r++)0!=(i&s)&&this.decodeBlock(r),s>>=1},a.prototype.decodeMotionVectors=function(){var t,e,i=0;this.macroblockMotFw?(t=this.readCode(w),0!=t&&1!=this.forwardF?(i=this.buffer.getBits(this.forwardRSize),e=(Math.abs(t)-1<<this.forwardRSize)+i+1,0>t&&(e=-e)):e=t,this.motionFwHPrev+=e,this.motionFwHPrev>(this.forwardF<<4)-1?this.motionFwHPrev-=this.forwardF<<5:this.motionFwHPrev<-this.forwardF<<4&&(this.motionFwHPrev+=this.forwardF<<5),this.motionFwH=this.motionFwHPrev,this.fullPelForward&&(this.motionFwH<<=1),t=this.readCode(w),0!=t&&1!=this.forwardF?(i=this.buffer.getBits(this.forwardRSize),e=(Math.abs(t)-1<<this.forwardRSize)+i+1,0>t&&(e=-e)):e=t,this.motionFwVPrev+=e,this.motionFwVPrev>(this.forwardF<<4)-1?this.motionFwVPrev-=this.forwardF<<5:this.motionFwVPrev<-this.forwardF<<4&&(this.motionFwVPrev+=this.forwardF<<5),this.motionFwV=this.motionFwVPrev,this.fullPelForward&&(this.motionFwV<<=1)):this.pictureCodingType==T&&(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0)},a.prototype.copyMacroblock=function(t,e,i,r,s){var o,n,a,h,d,c,f,l,u,p=this.Y32,m=this.Cb32,v=this.Cr32;o=this.codedWidth,n=o-16,a=t>>1,h=e>>1,d=1==(1&t),c=1==(1&e),f=((this.mbRow<<4)+h)*o+(this.mbCol<<4)+a,l=this.mbRow*o+this.mbCol<<2,u=l+(o<<2);var y,w,b;if(d)if(c)for(;u>l;){y=i[f]+i[f+o],f++;for(var g=0;4>g;g++)w=i[f]+i[f+o],f++,b=y+w+2>>2&255,y=i[f]+i[f+o],f++,b|=y+w+2<<6&65280,w=i[f]+i[f+o],f++,b|=y+w+2<<14&16711680,y=i[f]+i[f+o],f++,b|=y+w+2<<22&4278190080,p[l++]=b;l+=n>>2,f+=n-1}else for(;u>l;){y=i[f++];for(var g=0;4>g;g++)w=i[f++],b=y+w+1>>1&255,y=i[f++],b|=y+w+1<<7&65280,w=i[f++],b|=y+w+1<<15&16711680,y=i[f++],b|=y+w+1<<23&4278190080,p[l++]=b;l+=n>>2,f+=n-1}else if(c)for(;u>l;){for(var g=0;4>g;g++)b=i[f]+i[f+o]+1>>1&255,f++,b|=i[f]+i[f+o]+1<<7&65280,f++,b|=i[f]+i[f+o]+1<<15&16711680,f++,b|=i[f]+i[f+o]+1<<23&4278190080,f++,p[l++]=b;l+=n>>2,f+=n}else for(;u>l;){for(var g=0;4>g;g++)b=i[f],f++,b|=i[f]<<8,f++,b|=i[f]<<16,f++,b|=i[f]<<24,f++,p[l++]=b;l+=n>>2,f+=n}o=this.halfWidth,n=o-8,a=t/2>>1,h=e/2>>1,d=1==(t/2&1),c=1==(e/2&1),f=((this.mbRow<<3)+h)*o+(this.mbCol<<3)+a,l=this.mbRow*o+this.mbCol<<1,u=l+(o<<1);var _,C,x,T,A,E;if(d)if(c)for(;u>l;){_=r[f]+r[f+o],T=s[f]+s[f+o],f++;for(var g=0;2>g;g++)C=r[f]+r[f+o],A=s[f]+s[f+o],f++,x=_+C+2>>2&255,E=T+A+2>>2&255,_=r[f]+r[f+o],T=s[f]+s[f+o],f++,x|=_+C+2<<6&65280,E|=T+A+2<<6&65280,C=r[f]+r[f+o],A=s[f]+s[f+o],f++,x|=_+C+2<<14&16711680,E|=T+A+2<<14&16711680,_=r[f]+r[f+o],T=s[f]+s[f+o],f++,x|=_+C+2<<22&4278190080,E|=T+A+2<<22&4278190080,v[l]=x,m[l]=E,l++;l+=n>>2,f+=n-1}else for(;u>l;){_=r[f],T=s[f],f++;for(var g=0;2>g;g++)C=r[f],A=s[f++],x=_+C+1>>1&255,E=T+A+1>>1&255,_=r[f],T=s[f++],x|=_+C+1<<7&65280,E|=T+A+1<<7&65280,C=r[f],A=s[f++],x|=_+C+1<<15&16711680,E|=T+A+1<<15&16711680,_=r[f],T=s[f++],x|=_+C+1<<23&4278190080,E|=T+A+1<<23&4278190080,v[l]=x,m[l]=E,l++;l+=n>>2,f+=n-1}else if(c)for(;u>l;){for(var g=0;2>g;g++)x=r[f]+r[f+o]+1>>1&255,E=s[f]+s[f+o]+1>>1&255,f++,x|=r[f]+r[f+o]+1<<7&65280,E|=s[f]+s[f+o]+1<<7&65280,f++,x|=r[f]+r[f+o]+1<<15&16711680,E|=s[f]+s[f+o]+1<<15&16711680,f++,x|=r[f]+r[f+o]+1<<23&4278190080,E|=s[f]+s[f+o]+1<<23&4278190080,f++,v[l]=x,m[l]=E,l++;l+=n>>2,f+=n}else for(;u>l;){for(var g=0;2>g;g++)x=r[f],E=s[f],f++,x|=r[f]<<8,E|=s[f]<<8,f++,x|=r[f]<<16,E|=s[f]<<16,f++,x|=r[f]<<24,E|=s[f]<<24,f++,v[l]=x,m[l]=E,l++;l+=n>>2,f+=n}},a.prototype.decodeBlock=function(t){var e,i=0;if(this.macroblockIntra){var r,s;if(4>t?(r=this.dcPredictorY,s=this.readCode(b)):(r=4==t?this.dcPredictorCr:this.dcPredictorCb,s=this.readCode(g)),s>0){var o=this.buffer.getBits(s);this.blockData[0]=0!=(o&1<<s-1)?r+o:r+(-1<<s|o+1)}else this.blockData[0]=r;4>t?this.dcPredictorY=this.blockData[0]:4==t?this.dcPredictorCr=this.blockData[0]:this.dcPredictorCb=this.blockData[0],this.blockData[0]<<=8,e=this.intraQuantMatrix,i=1}else e=this.nonIntraQuantMatrix;for(var a=0;;){var h=0,c=this.readCode(_);if(1==c&&i>0&&0==this.buffer.getBits(1))break;65535==c?(h=this.buffer.getBits(6),a=this.buffer.getBits(8),0==a?a=this.buffer.getBits(8):128==a?a=this.buffer.getBits(8)-256:a>128&&(a-=256)):(h=c>>8,a=255&c,this.buffer.getBits(1)&&(a=-a)),i+=h;var f=d[i];i++,a<<=1,this.macroblockIntra||(a+=0>a?-1:1),a=a*this.quantizerScale*e[f]>>4,0==(1&a)&&(a-=a>0?1:-1),a>2047?a=2047:-2048>a&&(a=-2048),this.blockData[f]=a*l[f]}var u,p,m;4>t?(u=this.Y,m=this.codedWidth-8,p=this.mbRow*this.codedWidth+this.mbCol<<4,0!=(1&t)&&(p+=8),0!=(2&t)&&(p+=this.codedWidth<<3)):(u=4==t?this.Cb:this.Cr,m=(this.codedWidth>>1)-8,p=(this.mbRow*this.codedWidth<<2)+(this.mbCol<<3)),this.macroblockIntra?1==i?(n.copyValueToDestination(this.blockData[0]+128>>8,u,p,m),this.blockData[0]=0):(this.IDCT(),n.copyBlockToDestination(this.blockData,u,p,m),this.blockData.set(this.zeroBlockData)):1==i?(n.addValueToDestination(this.blockData[0]+128>>8,u,p,m),this.blockData[0]=0):(this.IDCT(),n.addBlockToDestination(this.blockData,u,p,m),this.blockData.set(this.zeroBlockData)),i=0},a.prototype.IDCT=function(){var t,e,i,r,s,o,n,a,h,d,c,f,l,u,p,m,v,y,w,b=this.blockData;for(w=0;8>w;++w)t=b[32+w],e=b[16+w]+b[48+w],i=b[40+w]-b[24+w],o=b[8+w]+b[56+w],n=b[24+w]+b[40+w],r=b[8+w]-b[56+w],s=o+n,a=b[0+w],l=(473*r-196*i+128>>8)-s,h=l-(362*(o-n)+128>>8),d=a-t,c=(362*(b[16+w]-b[48+w])+128>>8)-e,f=a+t,u=d+c,p=f+e,m=d-c,v=f-e,y=-h-(473*i+196*r+128>>8),b[0+w]=s+p,b[8+w]=l+u,b[16+w]=m-h,b[24+w]=v-y,b[32+w]=v+y,b[40+w]=h+m,b[48+w]=u-l,b[56+w]=p-s;for(w=0;64>w;w+=8)t=b[4+w],e=b[2+w]+b[6+w],i=b[5+w]-b[3+w],o=b[1+w]+b[7+w],n=b[3+w]+b[5+w],r=b[1+w]-b[7+w],s=o+n,a=b[0+w],l=(473*r-196*i+128>>8)-s,h=l-(362*(o-n)+128>>8),d=a-t,c=(362*(b[2+w]-b[6+w])+128>>8)-e,f=a+t,u=d+c,p=f+e,m=d-c,v=f-e,y=-h-(473*i+196*r+128>>8),b[0+w]=s+p+128>>8,b[1+w]=l+u+128>>8,b[2+w]=m-h+128>>8,b[3+w]=v-y+128>>8,b[4+w]=v+y+128>>8,b[5+w]=h+m+128>>8,b[6+w]=u-l+128>>8,b[7+w]=p-s+128>>8},a.prototype.readCode=function(t){var e=0;do e=t[e+this.buffer.getBits(1)];while(e>=0&&0!=t[e]);return t[e+2]},a.prototype.findStartCode=function(t){for(var e=0;;)if(e=this.buffer.findNextMPEGStartCode(),e==t||e==r.NOT_FOUND)return e;return r.NOT_FOUND};var h=[0,23.976,24,25,29.97,30,50,59.94,60,0,0,0,0,0,0,0],d=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),c=new Uint8Array([8,16,19,22,26,27,29,34,16,16,22,24,27,29,34,37,19,22,26,27,29,34,34,38,22,22,26,27,29,34,37,40,22,26,27,29,32,35,40,48,26,27,29,32,35,40,48,58,26,27,29,34,38,46,56,69,27,29,35,38,46,56,69,83]),f=new Uint8Array([16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]),l=new Uint8Array([32,44,42,38,32,25,17,9,44,62,58,52,44,35,24,12,42,58,55,49,42,33,23,12,38,52,49,44,38,30,20,10,32,44,42,38,32,25,17,9,25,35,33,30,25,20,14,7,17,24,23,20,17,14,9,5,9,12,12,10,9,7,5,2]),u=new Int16Array([3,6,0,9,12,0,0,0,1,15,18,0,21,24,0,27,30,0,33,36,0,0,0,3,0,0,2,39,42,0,45,48,0,0,0,5,0,0,4,51,54,0,57,60,0,0,0,7,0,0,6,63,66,0,69,72,0,75,78,0,81,84,0,-1,87,0,-1,90,0,93,96,0,99,102,0,105,108,0,111,114,0,0,0,9,0,0,8,117,120,0,123,126,0,129,132,0,135,138,0,0,0,15,0,0,14,0,0,13,0,0,12,0,0,11,0,0,10,141,-1,0,-1,144,0,147,150,0,153,156,0,159,162,0,165,168,0,171,174,0,177,180,0,183,-1,0,-1,186,0,189,192,0,195,198,0,201,204,0,207,210,0,213,216,0,219,222,0,0,0,21,0,0,20,0,0,19,0,0,18,0,0,17,0,0,16,0,0,35,0,0,34,0,0,33,0,0,32,0,0,31,0,0,30,0,0,29,0,0,28,0,0,27,0,0,26,0,0,25,0,0,24,0,0,23,0,0,22]),p=new Int8Array([3,6,0,-1,9,0,0,0,1,0,0,17]),m=new Int8Array([3,6,0,9,12,0,0,0,10,15,18,0,0,0,2,21,24,0,0,0,8,27,30,0,33,36,0,-1,39,0,0,0,18,0,0,26,0,0,1,0,0,17]),v=new Int8Array([3,6,0,9,15,0,12,18,0,24,21,0,0,0,12,27,30,0,0,0,14,39,42,0,36,33,0,0,0,4,0,0,6,54,48,0,45,51,0,0,0,8,0,0,10,-1,57,0,0,0,1,60,63,0,0,0,30,0,0,17,0,0,22,0,0,26]),y=new Int16Array([6,3,0,9,18,0,12,15,0,24,33,0,36,39,0,27,21,0,30,42,0,60,57,0,54,48,0,69,51,0,81,75,0,63,84,0,45,66,0,72,78,0,0,0,60,105,120,0,132,144,0,114,108,0,126,141,0,87,93,0,117,96,0,0,0,32,135,138,0,99,123,0,129,102,0,0,0,4,90,111,0,0,0,8,0,0,16,0,0,44,150,168,0,0,0,28,0,0,52,0,0,62,183,177,0,156,180,0,0,0,1,165,162,0,0,0,61,0,0,56,171,174,0,0,0,2,0,0,40,153,186,0,0,0,48,192,189,0,147,159,0,0,0,20,0,0,12,240,249,0,0,0,63,231,225,0,195,219,0,252,198,0,0,0,24,0,0,36,0,0,3,207,261,0,243,237,0,204,213,0,210,234,0,201,228,0,216,222,0,258,255,0,264,246,0,-1,282,0,285,291,0,0,0,33,0,0,9,318,330,0,306,348,0,0,0,5,0,0,10,279,267,0,0,0,6,0,0,18,0,0,17,0,0,34,339,357,0,309,312,0,270,276,0,327,321,0,351,354,0,303,297,0,294,288,0,300,273,0,342,345,0,315,324,0,336,333,0,363,375,0,0,0,41,0,0,14,0,0,21,372,366,0,360,369,0,0,0,11,0,0,19,0,0,7,0,0,35,0,0,13,0,0,50,0,0,49,0,0,58,0,0,37,0,0,25,0,0,45,0,0,57,0,0,26,0,0,29,0,0,38,0,0,53,0,0,23,0,0,43,0,0,46,0,0,42,0,0,22,0,0,54,0,0,51,0,0,15,0,0,30,0,0,39,0,0,47,0,0,55,0,0,27,0,0,59,0,0,31]),w=new Int16Array([3,6,0,12,9,0,0,0,0,18,15,0,24,21,0,0,0,-1,0,0,1,27,30,0,36,33,0,0,0,2,0,0,-2,42,45,0,48,39,0,60,54,0,0,0,3,0,0,-3,51,57,0,-1,69,0,81,75,0,78,63,0,72,66,0,96,84,0,87,93,0,-1,99,0,108,105,0,0,0,-4,90,102,0,0,0,4,0,0,-7,0,0,5,111,123,0,0,0,-5,0,0,7,114,120,0,126,117,0,0,0,-6,0,0,6,153,162,0,150,147,0,135,138,0,156,141,0,129,159,0,132,144,0,0,0,10,0,0,9,0,0,8,0,0,-8,171,198,0,0,0,-9,180,192,0,168,183,0,165,186,0,174,189,0,0,0,-10,177,195,0,0,0,12,0,0,16,0,0,13,0,0,14,0,0,11,0,0,15,0,0,-16,0,0,-12,0,0,-14,0,0,-15,0,0,-11,0,0,-13]),b=new Int8Array([6,3,0,18,15,0,9,12,0,0,0,1,0,0,2,27,24,0,21,30,0,0,0,0,36,33,0,0,0,4,0,0,3,39,42,0,0,0,5,0,0,6,48,45,0,51,-1,0,0,0,7,0,0,8]),g=new Int8Array([6,3,0,12,9,0,18,15,0,24,21,0,0,0,2,0,0,1,0,0,0,30,27,0,0,0,3,36,33,0,0,0,4,42,39,0,0,0,5,48,45,0,0,0,6,51,-1,0,0,0,7,0,0,8]),_=new Int32Array([3,6,0,12,9,0,0,0,1,21,24,0,18,15,0,39,27,0,33,30,0,42,36,0,0,0,257,60,66,0,54,63,0,48,57,0,0,0,513,51,45,0,0,0,2,0,0,3,81,75,0,87,93,0,72,78,0,96,90,0,0,0,1025,69,84,0,0,0,769,0,0,258,0,0,1793,0,0,65535,0,0,1537,111,108,0,0,0,1281,105,102,0,117,114,0,99,126,0,120,123,0,156,150,0,162,159,0,144,147,0,129,135,0,138,132,0,0,0,2049,0,0,4,0,0,514,0,0,2305,153,141,0,165,171,0,180,168,0,177,174,0,183,186,0,0,0,2561,0,0,3329,0,0,6,0,0,259,0,0,5,0,0,770,0,0,2817,0,0,3073,228,225,0,201,210,0,219,213,0,234,222,0,216,231,0,207,192,0,204,189,0,198,195,0,243,261,0,273,240,0,246,237,0,249,258,0,279,276,0,252,255,0,270,282,0,264,267,0,0,0,515,0,0,260,0,0,7,0,0,1026,0,0,1282,0,0,4097,0,0,3841,0,0,3585,315,321,0,333,342,0,312,291,0,375,357,0,288,294,0,-1,369,0,285,303,0,318,363,0,297,306,0,339,309,0,336,348,0,330,300,0,372,345,0,351,366,0,327,354,0,360,324,0,381,408,0,417,420,0,390,378,0,435,438,0,384,387,0,0,0,2050,396,402,0,465,462,0,0,0,8,411,399,0,429,432,0,453,414,0,426,423,0,0,0,10,0,0,9,0,0,11,0,0,5377,0,0,1538,0,0,771,0,0,5121,0,0,1794,0,0,4353,0,0,4609,0,0,4865,444,456,0,0,0,1027,459,450,0,0,0,261,393,405,0,0,0,516,447,441,0,516,519,0,486,474,0,510,483,0,504,498,0,471,537,0,507,501,0,522,513,0,534,531,0,468,477,0,492,495,0,549,546,0,525,528,0,0,0,263,0,0,2562,0,0,2306,0,0,5633,0,0,5889,0,0,6401,0,0,6145,0,0,1283,0,0,772,0,0,13,0,0,12,0,0,14,0,0,15,0,0,517,0,0,6657,0,0,262,540,543,0,480,489,0,588,597,0,0,0,27,609,555,0,606,603,0,0,0,19,0,0,22,591,621,0,0,0,18,573,576,0,564,570,0,0,0,20,552,582,0,0,0,21,558,579,0,0,0,23,612,594,0,0,0,25,0,0,24,600,615,0,0,0,31,0,0,30,0,0,28,0,0,29,0,0,26,0,0,17,0,0,16,567,618,0,561,585,0,654,633,0,0,0,37,645,648,0,0,0,36,630,636,0,0,0,34,639,627,0,663,666,0,657,624,0,651,642,0,669,660,0,0,0,35,0,0,267,0,0,40,0,0,268,0,0,266,0,0,32,0,0,264,0,0,265,0,0,38,0,0,269,0,0,270,0,0,33,0,0,39,0,0,7937,0,0,6913,0,0,7681,0,0,4098,0,0,7425,0,0,7169,0,0,271,0,0,274,0,0,273,0,0,272,0,0,1539,0,0,2818,0,0,3586,0,0,3330,0,0,3074,0,0,3842]),C=1,x=1,T=2,A=3,E=179,F=1,D=175,B=0,R=181,P=178,S=[null,p,m,v]},{"./BitReader.js":2,"./CanvasRenderer.js":3,"./WebGLRenderer.js":7,"./utils.js":8}],5:[function(t,e,i){var r=function(){this.interval=500,this.players=[],this.intervalID=null};r.prototype.add=function(t){this.players.push(t),this.testBoundingRect(t),this.intervalID||(this.intervalID=setInterval(this.watch.bind(this),this.interval))},r.prototype.testBoundingRect=function(t){var e=t.el.getBoundingClientRect();0<=e.top&&e.bottom<=window.innerHeight?t.__shown||(t.emit("show"),t.__shown=!0):t.__shown&&(t.emit("unshow"),t.__shown=!1)},r.prototype.watch=function(){for(var t=0;t<this.players.length;t++){var e=this.players[t];this.testBoundingRect(e)}},e.exports=new r},{}],6:[function(t,e,i){var r=t("eventemitter2").EventEmitter2,s=t("inherits"),o=e.exports=function(){this.videos=[],this.index=0};s(o,r),o.prototype.findByIndex=function(t){for(var e=0;e<this.videos.length;e++){var i=this.videos[e];if(i.index===t)return i}return null},o.prototype.findByURL=function(t){for(var e=0;e<this.videos.length;e++){var i=this.videos[e];if(i.url===t)return i}return null},o.prototype.findByStatus=function(t){for(var e=0;e<this.videos.length;e++){var i=this.videos[e];if(i.status===t)return i}return null},o.prototype.add=function(t){t=Array.isArray(t)?t:[t];for(var e=0;e<t.length;e++){var i=t[e],r=this.findByURL(i);r||(r={index:this.videos.length,url:i,data:null,status:"declared"},this.videos.push(r))}},o.prototype._load=function(t,e){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(i.readyState==i.DONE&&200==i.status){var e=this.findByURL(t);e.data=i.response,e.status="loaded",this.emit("load",e),this.load()}}.bind(this),"undefined"!=typeof e&&(i.timeout=e,i.ontimeout=function(){var e=this.findByURL(t);this.emit("timeout",e)}.bind(this));var r=this.findByURL(t);r.status="loading",i.open("GET",t),i.responseType="arraybuffer",i.send()},o.prototype.load=function(t){if(!this.findByStatus("loading")){var e=this.findByStatus("declared");e&&this._load(e.url,t)}}},{eventemitter2:9,inherits:10}],7:[function(t,e,i){var r=e.exports=function(t,e){this.decoder=t,this.canvas=e,this.gl=null,this.program=null,this.YTexture=null,this.CBTexture=null,this.CRTexture=null};r.prototype.init=function(){this.gl.useProgram(this.program),this.gl.viewport(0,0,this.decoder.width,this.decoder.height)},r.prototype.initGL=function(){try{var t=this.gl=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl")}catch(e){return!1}if(!t)return!1;if(this.buffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,1]),t.STATIC_DRAW),this.program=t.createProgram(),t.attachShader(this.program,this.compileShader(t.VERTEX_SHADER,o)),t.attachShader(this.program,this.compileShader(t.FRAGMENT_SHADER,s)),t.linkProgram(this.program),!t.getProgramParameter(this.program,t.LINK_STATUS))throw new Error(t.getProgramInfoLog(this.program));this.gl.useProgram(this.program),this.YTexture=this.createTexture(0,"YTexture"),this.CBTexture=this.createTexture(1,"CBTexture"),this.CRTexture=this.createTexture(2,"CRTexture");var i=t.getAttribLocation(this.program,"vertex");return t.enableVertexAttribArray(i),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0),!0},r.prototype.createTexture=function(t,e){var i=this.gl,r=i.createTexture();return i.bindTexture(i.TEXTURE_2D,r),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.uniform1i(i.getUniformLocation(this.program,e),t),r},r.prototype.compileShader=function(t,e){var i=this.gl,r=i.createShader(t);if(i.shaderSource(r,e),i.compileShader(r),!i.getShaderParameter(r,i.COMPILE_STATUS))throw new Error(i.getShaderInfoLog(r));return r},r.prototype.render=function(t,e,i){var r=this.gl,s=new Uint8Array(t.buffer),o=new Uint8Array(i.buffer),n=new Uint8Array(e.buffer);r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this.YTexture),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,this.decoder.codedWidth,this.decoder.height,0,r.LUMINANCE,r.UNSIGNED_BYTE,s),r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,this.CBTexture),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,this.decoder.halfWidth,this.decoder.height/2,0,r.LUMINANCE,r.UNSIGNED_BYTE,o),r.activeTexture(r.TEXTURE2),r.bindTexture(r.TEXTURE_2D,this.CRTexture),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,this.decoder.halfWidth,this.decoder.height/2,0,r.LUMINANCE,r.UNSIGNED_BYTE,n),r.drawArrays(r.TRIANGLE_STRIP,0,4)};var s=["precision mediump float;","uniform sampler2D YTexture;","uniform sampler2D CBTexture;","uniform sampler2D CRTexture;","varying vec2 texCoord;","void main() {","float y = texture2D(YTexture, texCoord).r;","float cr = texture2D(CBTexture, texCoord).r - 0.5;","float cb = texture2D(CRTexture, texCoord).r - 0.5;","gl_FragColor = vec4(","y + 1.4 * cr,","y + -0.343 * cb - 0.711 * cr,","y + 1.765 * cb,","1.0",");","}"].join("\n"),o=["attribute vec2 vertex;","varying vec2 texCoord;","void main() {","texCoord = vertex;","gl_Position = vec4((vertex * 2.0 - 1.0) * vec2(1, -1), 0.0, 1.0);","}"].join("\n")},{}],8:[function(t,e,i){var r=function(t,e,i,r){for(var s=0;64>s;s+=8,i+=r+8)e[i+0]=t[s+0],e[i+1]=t[s+1],e[i+2]=t[s+2],e[i+3]=t[s+3],e[i+4]=t[s+4],e[i+5]=t[s+5],e[i+6]=t[s+6],e[i+7]=t[s+7]},s=function(t,e,i,r){for(var s=0;64>s;s+=8,i+=r+8)e[i+0]+=t[s+0],e[i+1]+=t[s+1],e[i+2]+=t[s+2],e[i+3]+=t[s+3],e[i+4]+=t[s+4],e[i+5]+=t[s+5],e[i+6]+=t[s+6],e[i+7]+=t[s+7]},o=function(t,e,i,r){for(var s=0,o=0;8>o;o++){for(var n=0;8>n;n++){var a=t[s++];e[i++]=a>255?255:0>a?0:a}i+=r}},n=function(t,e,i,r){for(var s=0,o=0;8>o;o++){for(var n=0;8>n;n++){var a=t[s++]+e[i];e[i++]=a>255?255:0>a?0:a}i+=r}};e.exports.MaybeClampedUint8Array=window.Uint8ClampedArray||window.Uint8Array,window.Uint8ClampedArray?(e.exports.copyBlockToDestination=o,e.exports.addBlockToDestination=n):(e.exports.copyBlockToDestination=r,e.exports.addBlockToDestination=s),e.exports.copyValueToDestination=function(t,e,i,r){for(var s=0;64>s;s+=8,i+=r+8)e[i+0]=t,e[i+1]=t,e[i+2]=t,e[i+3]=t,e[i+4]=t,e[i+5]=t,e[i+6]=t,e[i+7]=t},e.exports.addValueToDestination=function(t,e,i,r){for(var s=0;64>s;s+=8,i+=r+8)e[i+0]+=t,e[i+1]+=t,e[i+2]+=t,e[i+3]+=t,e[i+4]+=t,e[i+5]+=t,e[i+6]+=t,e[i+7]+=t},e.exports.fillArray=function(t,e){for(var i=0,r=t.length;r>i;i++)t[i]=e}},{}],9:[function(e,i,r){!function(e){function i(){this._events={},this._conf&&s.call(this,this._conf)}function s(t){t&&(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),t.maxListeners&&(this._events.maxListeners=t.maxListeners),t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this.newListener=t.newListener),this.wildcard&&(this.listenerTree={}))}function o(t){this._events={},this.newListener=!1,s.call(this,t)}function n(t,e,i,r){if(!i)return[];var s,o,a,h,d,c,f,l=[],u=e.length,p=e[r],m=e[r+1];if(r===u&&i._listeners){if("function"==typeof i._listeners)return t&&t.push(i._listeners),[i];for(s=0,o=i._listeners.length;o>s;s++)t&&t.push(i._listeners[s]);return[i]}if("*"===p||"**"===p||i[p]){if("*"===p){for(a in i)"_listeners"!==a&&i.hasOwnProperty(a)&&(l=l.concat(n(t,e,i[a],r+1)));return l}if("**"===p){f=r+1===u||r+2===u&&"*"===m,f&&i._listeners&&(l=l.concat(n(t,e,i,u)));for(a in i)"_listeners"!==a&&i.hasOwnProperty(a)&&("*"===a||"**"===a?(i[a]._listeners&&!f&&(l=l.concat(n(t,e,i[a],u))),l=l.concat(n(t,e,i[a],r))):l=l.concat(a===m?n(t,e,i[a],r+2):n(t,e,i[a],r)));return l}l=l.concat(n(t,e,i[p],r+1))}if(h=i["*"],h&&n(t,e,h,r+1),d=i["**"])if(u>r){d._listeners&&n(t,e,d,u);for(a in d)"_listeners"!==a&&d.hasOwnProperty(a)&&(a===m?n(t,e,d[a],r+2):a===p?n(t,e,d[a],r+1):(c={},c[a]=d[a],n(t,e,{"**":c},r+1)))}else d._listeners?n(t,e,d,u):d["*"]&&d["*"]._listeners&&n(t,e,d["*"],u);return l}function a(t,e){t="string"==typeof t?t.split(this.delimiter):t.slice();for(var i=0,r=t.length;r>i+1;i++)if("**"===t[i]&&"**"===t[i+1])return;for(var s=this.listenerTree,o=t.shift();o;){if(s[o]||(s[o]={}),s=s[o],0===t.length){if(s._listeners){if("function"==typeof s._listeners)s._listeners=[s._listeners,e];else if(h(s._listeners)&&(s._listeners.push(e),!s._listeners.warned)){var n=d;"undefined"!=typeof this._events.maxListeners&&(n=this._events.maxListeners),n>0&&s._listeners.length>n&&(s._listeners.warned=!0,
console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",s._listeners.length),console.trace())}}else s._listeners=e;return!0}o=t.shift()}return!0}var h=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},d=10;o.prototype.delimiter=".",o.prototype.setMaxListeners=function(t){this._events||i.call(this),this._events.maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t},o.prototype.event="",o.prototype.once=function(t,e){return this.many(t,1,e),this},o.prototype.many=function(t,e,i){function r(){0===--e&&s.off(t,r),i.apply(this,arguments)}var s=this;if("function"!=typeof i)throw new Error("many only accepts instances of Function");return r._origin=i,this.on(t,r),s},o.prototype.emit=function(){this._events||i.call(this);var t=arguments[0];if("newListener"===t&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var e=arguments.length,r=new Array(e-1),s=1;e>s;s++)r[s-1]=arguments[s];for(s=0,e=this._all.length;e>s;s++)this.event=t,this._all[s].apply(this,r)}if("error"===t&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var o;if(this.wildcard){o=[];var a="string"==typeof t?t.split(this.delimiter):t.slice();n.call(this,o,a,this.listenerTree,0)}else o=this._events[t];if("function"==typeof o){if(this.event=t,1===arguments.length)o.call(this);else if(arguments.length>1)switch(arguments.length){case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(var e=arguments.length,r=new Array(e-1),s=1;e>s;s++)r[s-1]=arguments[s];o.apply(this,r)}return!0}if(o){for(var e=arguments.length,r=new Array(e-1),s=1;e>s;s++)r[s-1]=arguments[s];for(var h=o.slice(),s=0,e=h.length;e>s;s++)this.event=t,h[s].apply(this,r);return h.length>0||!!this._all}return!!this._all},o.prototype.on=function(t,e){if("function"==typeof t)return this.onAny(t),this;if("function"!=typeof e)throw new Error("on only accepts instances of Function");if(this._events||i.call(this),this.emit("newListener",t,e),this.wildcard)return a.call(this,t,e),this;if(this._events[t]){if("function"==typeof this._events[t])this._events[t]=[this._events[t],e];else if(h(this._events[t])&&(this._events[t].push(e),!this._events[t].warned)){var r=d;"undefined"!=typeof this._events.maxListeners&&(r=this._events.maxListeners),r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}}else this._events[t]=e;return this},o.prototype.onAny=function(t){if("function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(t),this},o.prototype.addListener=o.prototype.on,o.prototype.off=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");var i,r=[];if(this.wildcard){var s="string"==typeof t?t.split(this.delimiter):t.slice();r=n.call(this,null,s,this.listenerTree,0)}else{if(!this._events[t])return this;i=this._events[t],r.push({_listeners:i})}for(var o=0;o<r.length;o++){var a=r[o];if(i=a._listeners,h(i)){for(var d=-1,c=0,f=i.length;f>c;c++)if(i[c]===e||i[c].listener&&i[c].listener===e||i[c]._origin&&i[c]._origin===e){d=c;break}if(0>d)continue;return this.wildcard?a._listeners.splice(d,1):this._events[t].splice(d,1),0===i.length&&(this.wildcard?delete a._listeners:delete this._events[t]),this}(i===e||i.listener&&i.listener===e||i._origin&&i._origin===e)&&(this.wildcard?delete a._listeners:delete this._events[t])}return this},o.prototype.offAny=function(t){var e,i=0,r=0;if(t&&this._all&&this._all.length>0){for(e=this._all,i=0,r=e.length;r>i;i++)if(t===e[i])return e.splice(i,1),this}else this._all=[];return this},o.prototype.removeListener=o.prototype.off,o.prototype.removeAllListeners=function(t){if(0===arguments.length)return!this._events||i.call(this),this;if(this.wildcard)for(var e="string"==typeof t?t.split(this.delimiter):t.slice(),r=n.call(this,null,e,this.listenerTree,0),s=0;s<r.length;s++){var o=r[s];o._listeners=null}else{if(!this._events[t])return this;this._events[t]=null}return this},o.prototype.listeners=function(t){if(this.wildcard){var e=[],r="string"==typeof t?t.split(this.delimiter):t.slice();return n.call(this,e,r,this.listenerTree,0),e}return this._events||i.call(this),this._events[t]||(this._events[t]=[]),h(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},o.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof t&&t.amd?t(function(){return o}):"object"==typeof r?r.EventEmitter2=o:window.EventEmitter2=o}()},{}],10:[function(t,e,i){e.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},{}]},{},[1])(1)});