/**
 * jsmpeg-inline - An Inline MPEG1 Video Player in JavaScript
 * @version v1.0.0
 * @link https://github.com/aita/jsmpeg-inline
 * @license GPLv3
 *
 * Based on jsmpeg by Dominic Szablewski - phoboslab.org
 * https://github.com/phoboslab
 *
 * Based on Java MPEG-1 Video Decoder and Player
 * Copyright (C) 2008 KORANDI Zoltan <korandi_z@users.sourceforge.net>
 * http://sourceforge.net/projects/javampeg1video/
 */
!function t(e,i,r){function s(n,h){if(!i[n]){if(!e[n]){var a="function"==typeof require&&require;if(!h&&a)return a(n,!0);if(o)return o(n,!0);var d=new Error("Cannot find module '"+n+"'");throw d.code="MODULE_NOT_FOUND",d}var l=i[n]={exports:{}};e[n][0].call(l.exports,function(t){var i=e[n][1][t];return s(i?i:t)},l,l.exports,t,e,i,r)}return i[n].exports}for(var o="function"==typeof require&&require,n=0;n<r.length;n++)s(r[n]);return s}({1:[function(t,e,i){function r(t){if(null===t||"object"!=typeof t)return t;var e={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=r(t[i]));return e}function s(t,e){var i=new o(e);t.appendChild(i.el),i.open()}var o=t("./Player.js"),n=document.scripts[document.scripts.length-1];if(n.previousElementSibling){var h=n.previousElementSibling;s(h,r(h.dataset))}},{"./Player.js":12}],2:[function(t,e,i){var r=e.exports=function(t){this.bytes=new Uint8Array(t),this.length=this.bytes.length,this.writePos=this.bytes.length,this.index=0};r.NOT_FOUND=-1,r.prototype.findNextMPEGStartCode=function(){for(var t=this.index+7>>3;t<this.writePos;t++)if(0==this.bytes[t]&&0==this.bytes[t+1]&&1==this.bytes[t+2])return this.index=t+4<<3,this.bytes[t+3];return this.index=this.writePos<<3,r.NOT_FOUND},r.prototype.nextBytesAreStartCode=function(){var t=this.index+7>>3;return t>=this.writePos||0==this.bytes[t]&&0==this.bytes[t+1]&&1==this.bytes[t+2]},r.prototype.nextBits=function(t){var e=this.index>>3,i=8-this.index%8;if(i>=t)return this.bytes[e]>>i-t&255>>8-t;var r=(this.index+t)%8,s=this.index+t-1>>3,o=this.bytes[e]&255>>8-i;for(e++;s>e;e++)o<<=8,o|=this.bytes[e];return r>0?(o<<=r,o|=this.bytes[e]>>8-r):(o<<=8,o|=this.bytes[e]),o},r.prototype.getBits=function(t){var e=this.nextBits(t);return this.index+=t,e},r.prototype.advance=function(t){return this.index+=t},r.prototype.rewind=function(t){return this.index-=t}},{}],3:[function(t,e,i){var r=t("./utils.js"),s=e.exports=function(t,e){this.decoder=t,this.canvas=e,this.ctx=this.canvas.getContext("2d")};s.prototype.init=function(){this.imageData=this.ctx.getImageData(0,0,this.decoder.width,this.decoder.height),r.fillArray(this.imageData.data,255)},s.prototype.render=function(t,e,i){this.YCbCrToRGBA(t,e,i),this.ctx.putImageData(this.imageData,0,0)},s.prototype.YCbCrToRGBA=function(t,e,i){for(var r,s,o,n,h,a=this.imageData.data,d=0,l=this.decoder.codedWidth,c=this.decoder.codedWidth+(this.decoder.codedWidth-this.decoder.width),u=0,f=this.decoder.halfWidth-(this.decoder.width>>1),p=0,y=4*this.decoder.width,v=4*this.decoder.width,m=this.decoder.width>>1,w=this.decoder.height>>1,b=0;w>b;b++){for(var g=0;m>g;g++){r=e[u],s=i[u],u++,o=s+(103*s>>8)-179,n=(88*r>>8)-44+(183*s>>8)-91,h=r+(198*r>>8)-227;var C=t[d++],x=t[d++];a[p]=C+o,a[p+1]=C-n,a[p+2]=C+h,a[p+4]=x+o,a[p+5]=x-n,a[p+6]=x+h,p+=8;var _=t[l++],T=t[l++];a[y]=_+o,a[y+1]=_-n,a[y+2]=_+h,a[y+4]=T+o,a[y+5]=T-n,a[y+6]=T+h,y+=8}d+=c,l+=c,p+=v,y+=v,u+=f}}},{"./utils.js":9}],4:[function(t,e,i){var r=t("./BitReader.js"),s=t("./WebGLRenderer.js"),o=t("./CanvasRenderer.js"),n=t("./utils.js"),h=e.exports=function(t){if(t=t||{},this.canvas=document.createElement("canvas"),!t.forceCanva2D){var e=new s(this,this.canvas);e.initGL()&&(this.renderer=e)}this.renderer||(this.renderer=new o(this,this.canvas)),this.customIntraQuantMatrix=new Uint8Array(64),this.customNonIntraQuantMatrix=new Uint8Array(64),this.blockData=new Int32Array(64),this.zeroBlockData=new Int32Array(64),n.fillArray(this.zeroBlockData,0),this.pictureCodingType=0,this.fullPelForward=!1,this.forwardFCode=0,this.forwardRSize=0,this.forwardF=0,this.quantizerScale=0,this.sliceBegin=!1,this.macroblockAddress=0,this.mbRow=0,this.mbCol=0,this.macroblockType=0,this.macroblockIntra=!1,this.macroblockMotFw=!1,this.motionFwH=0,this.motionFwV=0,this.motionFwHPrev=0,this.motionFwVPrev=0,this.cachedFrameCount=0};h.prototype.renderFrame=function(t,e,i){this.renderer.render(t,e,i)},h.prototype.nextFrame=function(){if(!this.buffer)return!1;for(;;){var t=this.getStartCode();if(t==F)this.decodeSequenceHeader();else{if(t==S)return this.decodePicture(),!0;if(t==r.NOT_FOUND)return!1}}},h.prototype.decodeSequenceHeader=function(){if(this.width=this.buffer.getBits(12),this.height=this.buffer.getBits(12),this.buffer.advance(4),this.pictureRate=a[this.buffer.getBits(4)],this.buffer.advance(30),this.initBuffers(),this.renderer.init(),this.buffer.getBits(1)){for(var t=0;64>t;t++)this.customIntraQuantMatrix[d[t]]=this.buffer.getBits(8);this.intraQuantMatrix=this.customIntraQuantMatrix}if(this.buffer.getBits(1)){for(var e=0;64>t;t++)this.customNonIntraQuantMatrix[d[e]]=this.buffer.getBits(8);this.nonIntraQuantMatrix=this.customNonIntraQuantMatrix}},h.prototype.initBuffers=function(){this.intraQuantMatrix=l,this.nonIntraQuantMatrix=c,this.mbWidth=this.width+15>>4,this.mbHeight=this.height+15>>4,this.mbSize=this.mbWidth*this.mbHeight,this.codedWidth=this.mbWidth<<4,this.codedHeight=this.mbHeight<<4,this.codedSize=this.codedWidth*this.codedHeight,this.halfWidth=this.mbWidth<<3,this.halfHeight=this.mbHeight<<3,this.quarterSize=this.codedSize>>2,this.sequenceStarted||(this.sequenceStarted=!0,this.Y=new n.MaybeClampedUint8Array(this.codedSize),this.Y32=new Uint32Array(this.Y.buffer),this.Cr=new n.MaybeClampedUint8Array(this.codedSize>>2),this.Cr32=new Uint32Array(this.Cr.buffer),this.Cb=new n.MaybeClampedUint8Array(this.codedSize>>2),this.Cb32=new Uint32Array(this.Cb.buffer),this.forwardY=new n.MaybeClampedUint8Array(this.codedSize),this.forwardY32=new Uint32Array(this.forwardY.buffer),this.forwardCr=new n.MaybeClampedUint8Array(this.codedSize>>2),this.forwardCr32=new Uint32Array(this.forwardCr.buffer),this.forwardCb=new n.MaybeClampedUint8Array(this.codedSize>>2),this.forwardCb32=new Uint32Array(this.forwardCb.buffer),this.canvas.width=this.width,this.canvas.height=this.height)},h.prototype.loadBuffer=function(t){this.buffer=new r(t),this.findStartCode(F),this.firstSequenceHeader=this.buffer.index,this.decodeSequenceHeader()},h.prototype.getStartCode=function(){return this.buffer.findNextMPEGStartCode()},h.prototype.decodePicture=function(t){if(this.buffer.advance(10),this.pictureCodingType=this.buffer.getBits(3),this.buffer.advance(16),!(this.pictureCodingType<=0||this.pictureCodingType>=E)){if(this.pictureCodingType==T){if(this.fullPelForward=this.buffer.getBits(1),this.forwardFCode=this.buffer.getBits(3),0==this.forwardFCode)return;this.forwardRSize=this.forwardFCode-1,this.forwardF=1<<this.forwardRSize}var e=0;do e=this.buffer.findNextMPEGStartCode();while(e==R||e==D);for(;e>=A&&B>=e;)this.decodeSlice(255&e),e=this.buffer.findNextMPEGStartCode();if(this.buffer.rewind(32),t!=x&&(this.renderFrame(this.Y,this.Cb,this.Cr),this.externalDecodeCallback&&this.externalDecodeCallback(this,this.canvas)),this.pictureCodingType==_||this.pictureCodingType==T){var i=this.forwardY,r=this.forwardY32,s=this.forwardCr,o=this.forwardCr32,n=this.forwardCb,h=this.forwardCb32;this.forwardY=this.Y,this.forwardY32=this.Y32,this.forwardCr=this.Cr,this.forwardCr32=this.Cr32,this.forwardCb=this.Cb,this.forwardCb32=this.Cb32,this.Y=i,this.Y32=r,this.Cr=s,this.Cr32=o,this.Cb=n,this.Cb32=h}}},h.prototype.decodeSlice=function(t){for(this.sliceBegin=!0,this.macroblockAddress=(t-1)*this.mbWidth-1,this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0,this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.quantizerScale=this.buffer.getBits(5);this.buffer.getBits(1);)this.buffer.advance(8);do this.decodeMacroblock();while(!this.buffer.nextBytesAreStartCode())},h.prototype.decodeMacroblock=function(){for(var t=0,e=this.readCode(f);34==e;)e=this.readCode(f);for(;35==e;)t+=33,e=this.readCode(f);if(t+=e,this.sliceBegin)this.sliceBegin=!1,this.macroblockAddress+=t;else{if(this.macroblockAddress+t>=this.mbSize)return;for(t>1&&(this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.pictureCodingType==T&&(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0));t>1;)this.macroblockAddress++,this.mbRow=this.macroblockAddress/this.mbWidth|0,this.mbCol=this.macroblockAddress%this.mbWidth,this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb),t--;this.macroblockAddress++}this.mbRow=this.macroblockAddress/this.mbWidth|0,this.mbCol=this.macroblockAddress%this.mbWidth,this.macroblockType=this.readCode(k[this.pictureCodingType]),this.macroblockIntra=1&this.macroblockType,this.macroblockMotFw=8&this.macroblockType,0!=(16&this.macroblockType)&&(this.quantizerScale=this.buffer.getBits(5)),this.macroblockIntra?(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0):(this.dcPredictorY=128,this.dcPredictorCr=128,this.dcPredictorCb=128,this.decodeMotionVectors(),this.copyMacroblock(this.motionFwH,this.motionFwV,this.forwardY,this.forwardCr,this.forwardCb));for(var i=0!=(2&this.macroblockType)?this.readCode(m):this.macroblockIntra?63:0,r=0,s=32;6>r;r++)0!=(i&s)&&this.decodeBlock(r),s>>=1},h.prototype.decodeMotionVectors=function(){var t,e,i=0;this.macroblockMotFw?(t=this.readCode(w),0!=t&&1!=this.forwardF?(i=this.buffer.getBits(this.forwardRSize),e=(Math.abs(t)-1<<this.forwardRSize)+i+1,0>t&&(e=-e)):e=t,this.motionFwHPrev+=e,this.motionFwHPrev>(this.forwardF<<4)-1?this.motionFwHPrev-=this.forwardF<<5:this.motionFwHPrev<-this.forwardF<<4&&(this.motionFwHPrev+=this.forwardF<<5),this.motionFwH=this.motionFwHPrev,this.fullPelForward&&(this.motionFwH<<=1),t=this.readCode(w),0!=t&&1!=this.forwardF?(i=this.buffer.getBits(this.forwardRSize),e=(Math.abs(t)-1<<this.forwardRSize)+i+1,0>t&&(e=-e)):e=t,this.motionFwVPrev+=e,this.motionFwVPrev>(this.forwardF<<4)-1?this.motionFwVPrev-=this.forwardF<<5:this.motionFwVPrev<-this.forwardF<<4&&(this.motionFwVPrev+=this.forwardF<<5),this.motionFwV=this.motionFwVPrev,this.fullPelForward&&(this.motionFwV<<=1)):this.pictureCodingType==T&&(this.motionFwH=this.motionFwHPrev=0,this.motionFwV=this.motionFwVPrev=0)},h.prototype.copyMacroblock=function(t,e,i,r,s){var o,n,h,a,d,l,c,u,f,p=this.Y32,y=this.Cb32,v=this.Cr32;o=this.codedWidth,n=o-16,h=t>>1,a=e>>1,d=1==(1&t),l=1==(1&e),c=((this.mbRow<<4)+a)*o+(this.mbCol<<4)+h,u=this.mbRow*o+this.mbCol<<2,f=u+(o<<2);var m,w,b;if(d)if(l)for(;f>u;){m=i[c]+i[c+o],c++;for(var g=0;4>g;g++)w=i[c]+i[c+o],c++,b=m+w+2>>2&255,m=i[c]+i[c+o],c++,b|=m+w+2<<6&65280,w=i[c]+i[c+o],c++,b|=m+w+2<<14&16711680,m=i[c]+i[c+o],c++,b|=m+w+2<<22&4278190080,p[u++]=b;u+=n>>2,c+=n-1}else for(;f>u;){m=i[c++];for(var g=0;4>g;g++)w=i[c++],b=m+w+1>>1&255,m=i[c++],b|=m+w+1<<7&65280,w=i[c++],b|=m+w+1<<15&16711680,m=i[c++],b|=m+w+1<<23&4278190080,p[u++]=b;u+=n>>2,c+=n-1}else if(l)for(;f>u;){for(var g=0;4>g;g++)b=i[c]+i[c+o]+1>>1&255,c++,b|=i[c]+i[c+o]+1<<7&65280,c++,b|=i[c]+i[c+o]+1<<15&16711680,c++,b|=i[c]+i[c+o]+1<<23&4278190080,c++,p[u++]=b;u+=n>>2,c+=n}else for(;f>u;){for(var g=0;4>g;g++)b=i[c],c++,b|=i[c]<<8,c++,b|=i[c]<<16,c++,b|=i[c]<<24,c++,p[u++]=b;u+=n>>2,c+=n}o=this.halfWidth,n=o-8,h=t/2>>1,a=e/2>>1,d=1==(t/2&1),l=1==(e/2&1),c=((this.mbRow<<3)+a)*o+(this.mbCol<<3)+h,u=this.mbRow*o+this.mbCol<<1,f=u+(o<<1);var C,x,_,T,E,F;if(d)if(l)for(;f>u;){C=r[c]+r[c+o],T=s[c]+s[c+o],c++;for(var g=0;2>g;g++)x=r[c]+r[c+o],E=s[c]+s[c+o],c++,_=C+x+2>>2&255,F=T+E+2>>2&255,C=r[c]+r[c+o],T=s[c]+s[c+o],c++,_|=C+x+2<<6&65280,F|=T+E+2<<6&65280,x=r[c]+r[c+o],E=s[c]+s[c+o],c++,_|=C+x+2<<14&16711680,F|=T+E+2<<14&16711680,C=r[c]+r[c+o],T=s[c]+s[c+o],c++,_|=C+x+2<<22&4278190080,F|=T+E+2<<22&4278190080,v[u]=_,y[u]=F,u++;u+=n>>2,c+=n-1}else for(;f>u;){C=r[c],T=s[c],c++;for(var g=0;2>g;g++)x=r[c],E=s[c++],_=C+x+1>>1&255,F=T+E+1>>1&255,C=r[c],T=s[c++],_|=C+x+1<<7&65280,F|=T+E+1<<7&65280,x=r[c],E=s[c++],_|=C+x+1<<15&16711680,F|=T+E+1<<15&16711680,C=r[c],T=s[c++],_|=C+x+1<<23&4278190080,F|=T+E+1<<23&4278190080,v[u]=_,y[u]=F,u++;u+=n>>2,c+=n-1}else if(l)for(;f>u;){for(var g=0;2>g;g++)_=r[c]+r[c+o]+1>>1&255,F=s[c]+s[c+o]+1>>1&255,c++,_|=r[c]+r[c+o]+1<<7&65280,F|=s[c]+s[c+o]+1<<7&65280,c++,_|=r[c]+r[c+o]+1<<15&16711680,F|=s[c]+s[c+o]+1<<15&16711680,c++,_|=r[c]+r[c+o]+1<<23&4278190080,F|=s[c]+s[c+o]+1<<23&4278190080,c++,v[u]=_,y[u]=F,u++;u+=n>>2,c+=n}else for(;f>u;){for(var g=0;2>g;g++)_=r[c],F=s[c],c++,_|=r[c]<<8,F|=s[c]<<8,c++,_|=r[c]<<16,F|=s[c]<<16,c++,_|=r[c]<<24,F|=s[c]<<24,c++,v[u]=_,y[u]=F,u++;u+=n>>2,c+=n}},h.prototype.decodeBlock=function(t){var e,i=0;if(this.macroblockIntra){var r,s;if(4>t?(r=this.dcPredictorY,s=this.readCode(b)):(r=4==t?this.dcPredictorCr:this.dcPredictorCb,s=this.readCode(g)),s>0){var o=this.buffer.getBits(s);this.blockData[0]=0!=(o&1<<s-1)?r+o:r+(-1<<s|o+1)}else this.blockData[0]=r;4>t?this.dcPredictorY=this.blockData[0]:4==t?this.dcPredictorCr=this.blockData[0]:this.dcPredictorCb=this.blockData[0],this.blockData[0]<<=8,e=this.intraQuantMatrix,i=1}else e=this.nonIntraQuantMatrix;for(var h=0;;){var a=0,l=this.readCode(C);if(1==l&&i>0&&0==this.buffer.getBits(1))break;65535==l?(a=this.buffer.getBits(6),h=this.buffer.getBits(8),0==h?h=this.buffer.getBits(8):128==h?h=this.buffer.getBits(8)-256:h>128&&(h-=256)):(a=l>>8,h=255&l,this.buffer.getBits(1)&&(h=-h)),i+=a;var c=d[i];i++,h<<=1,this.macroblockIntra||(h+=0>h?-1:1),h=h*this.quantizerScale*e[c]>>4,0==(1&h)&&(h-=h>0?1:-1),h>2047?h=2047:-2048>h&&(h=-2048),this.blockData[c]=h*u[c]}var f,p,y;4>t?(f=this.Y,y=this.codedWidth-8,p=this.mbRow*this.codedWidth+this.mbCol<<4,0!=(1&t)&&(p+=8),0!=(2&t)&&(p+=this.codedWidth<<3)):(f=4==t?this.Cb:this.Cr,y=(this.codedWidth>>1)-8,p=(this.mbRow*this.codedWidth<<2)+(this.mbCol<<3)),this.macroblockIntra?1==i?(n.copyValueToDestination(this.blockData[0]+128>>8,f,p,y),this.blockData[0]=0):(this.IDCT(),n.copyBlockToDestination(this.blockData,f,p,y),this.blockData.set(this.zeroBlockData)):1==i?(n.addValueToDestination(this.blockData[0]+128>>8,f,p,y),this.blockData[0]=0):(this.IDCT(),n.addBlockToDestination(this.blockData,f,p,y),this.blockData.set(this.zeroBlockData)),i=0},h.prototype.IDCT=function(){var t,e,i,r,s,o,n,h,a,d,l,c,u,f,p,y,v,m,w,b=this.blockData;for(w=0;8>w;++w)t=b[32+w],e=b[16+w]+b[48+w],i=b[40+w]-b[24+w],o=b[8+w]+b[56+w],n=b[24+w]+b[40+w],r=b[8+w]-b[56+w],s=o+n,h=b[0+w],u=(473*r-196*i+128>>8)-s,a=u-(362*(o-n)+128>>8),d=h-t,l=(362*(b[16+w]-b[48+w])+128>>8)-e,c=h+t,f=d+l,p=c+e,y=d-l,v=c-e,m=-a-(473*i+196*r+128>>8),b[0+w]=s+p,b[8+w]=u+f,b[16+w]=y-a,b[24+w]=v-m,b[32+w]=v+m,b[40+w]=a+y,b[48+w]=f-u,b[56+w]=p-s;for(w=0;64>w;w+=8)t=b[4+w],e=b[2+w]+b[6+w],i=b[5+w]-b[3+w],o=b[1+w]+b[7+w],n=b[3+w]+b[5+w],r=b[1+w]-b[7+w],s=o+n,h=b[0+w],u=(473*r-196*i+128>>8)-s,a=u-(362*(o-n)+128>>8),d=h-t,l=(362*(b[2+w]-b[6+w])+128>>8)-e,c=h+t,f=d+l,p=c+e,y=d-l,v=c-e,m=-a-(473*i+196*r+128>>8),b[0+w]=s+p+128>>8,b[1+w]=u+f+128>>8,b[2+w]=y-a+128>>8,b[3+w]=v-m+128>>8,b[4+w]=v+m+128>>8,b[5+w]=a+y+128>>8,b[6+w]=f-u+128>>8,b[7+w]=p-s+128>>8},h.prototype.readCode=function(t){var e=0;do e=t[e+this.buffer.getBits(1)];while(e>=0&&0!=t[e]);return t[e+2]},h.prototype.findStartCode=function(t){for(var e=0;;)if(e=this.buffer.findNextMPEGStartCode(),e==t||e==r.NOT_FOUND)return e;return r.NOT_FOUND};var a=[0,23.976,24,25,29.97,30,50,59.94,60,0,0,0,0,0,0,0],d=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),l=new Uint8Array([8,16,19,22,26,27,29,34,16,16,22,24,27,29,34,37,19,22,26,27,29,34,34,38,22,22,26,27,29,34,37,40,22,26,27,29,32,35,40,48,26,27,29,32,35,40,48,58,26,27,29,34,38,46,56,69,27,29,35,38,46,56,69,83]),c=new Uint8Array([16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16]),u=new Uint8Array([32,44,42,38,32,25,17,9,44,62,58,52,44,35,24,12,42,58,55,49,42,33,23,12,38,52,49,44,38,30,20,10,32,44,42,38,32,25,17,9,25,35,33,30,25,20,14,7,17,24,23,20,17,14,9,5,9,12,12,10,9,7,5,2]),f=new Int16Array([3,6,0,9,12,0,0,0,1,15,18,0,21,24,0,27,30,0,33,36,0,0,0,3,0,0,2,39,42,0,45,48,0,0,0,5,0,0,4,51,54,0,57,60,0,0,0,7,0,0,6,63,66,0,69,72,0,75,78,0,81,84,0,-1,87,0,-1,90,0,93,96,0,99,102,0,105,108,0,111,114,0,0,0,9,0,0,8,117,120,0,123,126,0,129,132,0,135,138,0,0,0,15,0,0,14,0,0,13,0,0,12,0,0,11,0,0,10,141,-1,0,-1,144,0,147,150,0,153,156,0,159,162,0,165,168,0,171,174,0,177,180,0,183,-1,0,-1,186,0,189,192,0,195,198,0,201,204,0,207,210,0,213,216,0,219,222,0,0,0,21,0,0,20,0,0,19,0,0,18,0,0,17,0,0,16,0,0,35,0,0,34,0,0,33,0,0,32,0,0,31,0,0,30,0,0,29,0,0,28,0,0,27,0,0,26,0,0,25,0,0,24,0,0,23,0,0,22]),p=new Int8Array([3,6,0,-1,9,0,0,0,1,0,0,17]),y=new Int8Array([3,6,0,9,12,0,0,0,10,15,18,0,0,0,2,21,24,0,0,0,8,27,30,0,33,36,0,-1,39,0,0,0,18,0,0,26,0,0,1,0,0,17]),v=new Int8Array([3,6,0,9,15,0,12,18,0,24,21,0,0,0,12,27,30,0,0,0,14,39,42,0,36,33,0,0,0,4,0,0,6,54,48,0,45,51,0,0,0,8,0,0,10,-1,57,0,0,0,1,60,63,0,0,0,30,0,0,17,0,0,22,0,0,26]),m=new Int16Array([6,3,0,9,18,0,12,15,0,24,33,0,36,39,0,27,21,0,30,42,0,60,57,0,54,48,0,69,51,0,81,75,0,63,84,0,45,66,0,72,78,0,0,0,60,105,120,0,132,144,0,114,108,0,126,141,0,87,93,0,117,96,0,0,0,32,135,138,0,99,123,0,129,102,0,0,0,4,90,111,0,0,0,8,0,0,16,0,0,44,150,168,0,0,0,28,0,0,52,0,0,62,183,177,0,156,180,0,0,0,1,165,162,0,0,0,61,0,0,56,171,174,0,0,0,2,0,0,40,153,186,0,0,0,48,192,189,0,147,159,0,0,0,20,0,0,12,240,249,0,0,0,63,231,225,0,195,219,0,252,198,0,0,0,24,0,0,36,0,0,3,207,261,0,243,237,0,204,213,0,210,234,0,201,228,0,216,222,0,258,255,0,264,246,0,-1,282,0,285,291,0,0,0,33,0,0,9,318,330,0,306,348,0,0,0,5,0,0,10,279,267,0,0,0,6,0,0,18,0,0,17,0,0,34,339,357,0,309,312,0,270,276,0,327,321,0,351,354,0,303,297,0,294,288,0,300,273,0,342,345,0,315,324,0,336,333,0,363,375,0,0,0,41,0,0,14,0,0,21,372,366,0,360,369,0,0,0,11,0,0,19,0,0,7,0,0,35,0,0,13,0,0,50,0,0,49,0,0,58,0,0,37,0,0,25,0,0,45,0,0,57,0,0,26,0,0,29,0,0,38,0,0,53,0,0,23,0,0,43,0,0,46,0,0,42,0,0,22,0,0,54,0,0,51,0,0,15,0,0,30,0,0,39,0,0,47,0,0,55,0,0,27,0,0,59,0,0,31]),w=new Int16Array([3,6,0,12,9,0,0,0,0,18,15,0,24,21,0,0,0,-1,0,0,1,27,30,0,36,33,0,0,0,2,0,0,-2,42,45,0,48,39,0,60,54,0,0,0,3,0,0,-3,51,57,0,-1,69,0,81,75,0,78,63,0,72,66,0,96,84,0,87,93,0,-1,99,0,108,105,0,0,0,-4,90,102,0,0,0,4,0,0,-7,0,0,5,111,123,0,0,0,-5,0,0,7,114,120,0,126,117,0,0,0,-6,0,0,6,153,162,0,150,147,0,135,138,0,156,141,0,129,159,0,132,144,0,0,0,10,0,0,9,0,0,8,0,0,-8,171,198,0,0,0,-9,180,192,0,168,183,0,165,186,0,174,189,0,0,0,-10,177,195,0,0,0,12,0,0,16,0,0,13,0,0,14,0,0,11,0,0,15,0,0,-16,0,0,-12,0,0,-14,0,0,-15,0,0,-11,0,0,-13]),b=new Int8Array([6,3,0,18,15,0,9,12,0,0,0,1,0,0,2,27,24,0,21,30,0,0,0,0,36,33,0,0,0,4,0,0,3,39,42,0,0,0,5,0,0,6,48,45,0,51,-1,0,0,0,7,0,0,8]),g=new Int8Array([6,3,0,12,9,0,18,15,0,24,21,0,0,0,2,0,0,1,0,0,0,30,27,0,0,0,3,36,33,0,0,0,4,42,39,0,0,0,5,48,45,0,0,0,6,51,-1,0,0,0,7,0,0,8]),C=new Int32Array([3,6,0,12,9,0,0,0,1,21,24,0,18,15,0,39,27,0,33,30,0,42,36,0,0,0,257,60,66,0,54,63,0,48,57,0,0,0,513,51,45,0,0,0,2,0,0,3,81,75,0,87,93,0,72,78,0,96,90,0,0,0,1025,69,84,0,0,0,769,0,0,258,0,0,1793,0,0,65535,0,0,1537,111,108,0,0,0,1281,105,102,0,117,114,0,99,126,0,120,123,0,156,150,0,162,159,0,144,147,0,129,135,0,138,132,0,0,0,2049,0,0,4,0,0,514,0,0,2305,153,141,0,165,171,0,180,168,0,177,174,0,183,186,0,0,0,2561,0,0,3329,0,0,6,0,0,259,0,0,5,0,0,770,0,0,2817,0,0,3073,228,225,0,201,210,0,219,213,0,234,222,0,216,231,0,207,192,0,204,189,0,198,195,0,243,261,0,273,240,0,246,237,0,249,258,0,279,276,0,252,255,0,270,282,0,264,267,0,0,0,515,0,0,260,0,0,7,0,0,1026,0,0,1282,0,0,4097,0,0,3841,0,0,3585,315,321,0,333,342,0,312,291,0,375,357,0,288,294,0,-1,369,0,285,303,0,318,363,0,297,306,0,339,309,0,336,348,0,330,300,0,372,345,0,351,366,0,327,354,0,360,324,0,381,408,0,417,420,0,390,378,0,435,438,0,384,387,0,0,0,2050,396,402,0,465,462,0,0,0,8,411,399,0,429,432,0,453,414,0,426,423,0,0,0,10,0,0,9,0,0,11,0,0,5377,0,0,1538,0,0,771,0,0,5121,0,0,1794,0,0,4353,0,0,4609,0,0,4865,444,456,0,0,0,1027,459,450,0,0,0,261,393,405,0,0,0,516,447,441,0,516,519,0,486,474,0,510,483,0,504,498,0,471,537,0,507,501,0,522,513,0,534,531,0,468,477,0,492,495,0,549,546,0,525,528,0,0,0,263,0,0,2562,0,0,2306,0,0,5633,0,0,5889,0,0,6401,0,0,6145,0,0,1283,0,0,772,0,0,13,0,0,12,0,0,14,0,0,15,0,0,517,0,0,6657,0,0,262,540,543,0,480,489,0,588,597,0,0,0,27,609,555,0,606,603,0,0,0,19,0,0,22,591,621,0,0,0,18,573,576,0,564,570,0,0,0,20,552,582,0,0,0,21,558,579,0,0,0,23,612,594,0,0,0,25,0,0,24,600,615,0,0,0,31,0,0,30,0,0,28,0,0,29,0,0,26,0,0,17,0,0,16,567,618,0,561,585,0,654,633,0,0,0,37,645,648,0,0,0,36,630,636,0,0,0,34,639,627,0,663,666,0,657,624,0,651,642,0,669,660,0,0,0,35,0,0,267,0,0,40,0,0,268,0,0,266,0,0,32,0,0,264,0,0,265,0,0,38,0,0,269,0,0,270,0,0,33,0,0,39,0,0,7937,0,0,6913,0,0,7681,0,0,4098,0,0,7425,0,0,7169,0,0,271,0,0,274,0,0,273,0,0,272,0,0,1539,0,0,2818,0,0,3586,0,0,3330,0,0,3074,0,0,3842]),x=1,_=1,T=2,E=3,F=179,A=1,B=175,S=0,R=181,D=178,k=[null,p,y,v]},{"./BitReader.js":2,"./CanvasRenderer.js":3,"./WebGLRenderer.js":7,"./utils.js":9}],5:[function(t,e,i){var r=function(){this.interval=500,this.players=[],this.intervalID=null};r.prototype.add=function(t){this.players.push(t),this.testBoundingRect(t),this.intervalID||(this.intervalID=setInterval(this.watch.bind(this),this.interval))},r.prototype.testBoundingRect=function(t){var e=t.el.getBoundingClientRect();0<=e.top&&e.bottom<=window.innerHeight?t.__shown||(t.emit("show"),t.__shown=!0):t.__shown&&(t.emit("unshow"),t.__shown=!1)},r.prototype.watch=function(){for(var t=0;t<this.players.length;t++){var e=this.players[t];this.testBoundingRect(e)}},e.exports=new r},{}],6:[function(t,e,i){var r=t("eventemitter2").EventEmitter2,s=t("inherits"),o=e.exports=function(){this.videos=[],this.index=0};s(o,r),o.prototype.findByIndex=function(t){for(var e=0;e<this.videos.length;e++){var i=this.videos[e];if(i.index===t)return i}return null},o.prototype.findByURL=function(t){for(var e=0;e<this.videos.length;e++){var i=this.videos[e];if(i.url===t)return i}return null},o.prototype.findByStatus=function(t){for(var e=0;e<this.videos.length;e++){var i=this.videos[e];if(i.status===t)return i}return null},o.prototype.add=function(t){t=Array.isArray(t)?t:[t];for(var e=0;e<t.length;e++){var i=t[e],r=this.findByURL(i);r||(r={index:this.videos.length,url:i,data:null,status:"declared"},this.videos.push(r))}},o.prototype._load=function(t,e){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(i.readyState==i.DONE&&200==i.status){var e=this.findByURL(t);e.data=i.response,e.status="loaded",this.emit("load",e),this.load()}}.bind(this),"undefined"!=typeof e&&(i.timeout=e,i.ontimeout=function(){var e=this.findByURL(t);this.emit("timeout",e)}.bind(this));var r=this.findByURL(t);r.status="loading",i.open("GET",t),i.responseType="arraybuffer",i.send()},o.prototype.load=function(t){if(!this.findByStatus("loading")){var e=this.findByStatus("declared");e&&this._load(e.url,t)}}},{eventemitter2:10,inherits:11}],7:[function(t,e,i){var r=e.exports=function(t,e){this.decoder=t,this.canvas=e,this.gl=null,this.program=null,this.YTexture=null,this.CBTexture=null,this.CRTexture=null};r.prototype.init=function(){this.gl.useProgram(this.program),this.gl.viewport(0,0,this.decoder.width,this.decoder.height)},r.prototype.initGL=function(){try{var t=this.gl=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl")}catch(e){return!1}if(!t)return!1;if(this.buffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,1]),t.STATIC_DRAW),this.program=t.createProgram(),t.attachShader(this.program,this.compileShader(t.VERTEX_SHADER,o)),t.attachShader(this.program,this.compileShader(t.FRAGMENT_SHADER,s)),t.linkProgram(this.program),!t.getProgramParameter(this.program,t.LINK_STATUS))throw new Error(t.getProgramInfoLog(this.program));this.gl.useProgram(this.program),this.YTexture=this.createTexture(0,"YTexture"),this.CBTexture=this.createTexture(1,"CBTexture"),this.CRTexture=this.createTexture(2,"CRTexture");var i=t.getAttribLocation(this.program,"vertex");return t.enableVertexAttribArray(i),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0),!0},r.prototype.createTexture=function(t,e){var i=this.gl,r=i.createTexture();return i.bindTexture(i.TEXTURE_2D,r),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.uniform1i(i.getUniformLocation(this.program,e),t),r},r.prototype.compileShader=function(t,e){var i=this.gl,r=i.createShader(t);if(i.shaderSource(r,e),i.compileShader(r),!i.getShaderParameter(r,i.COMPILE_STATUS))throw new Error(i.getShaderInfoLog(r));return r},r.prototype.render=function(t,e,i){var r=this.gl,s=new Uint8Array(t.buffer),o=new Uint8Array(i.buffer),n=new Uint8Array(e.buffer);r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this.YTexture),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,this.decoder.codedWidth,this.decoder.height,0,r.LUMINANCE,r.UNSIGNED_BYTE,s),r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,this.CBTexture),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,this.decoder.halfWidth,this.decoder.height/2,0,r.LUMINANCE,r.UNSIGNED_BYTE,o),r.activeTexture(r.TEXTURE2),r.bindTexture(r.TEXTURE_2D,this.CRTexture),r.texImage2D(r.TEXTURE_2D,0,r.LUMINANCE,this.decoder.halfWidth,this.decoder.height/2,0,r.LUMINANCE,r.UNSIGNED_BYTE,n),r.drawArrays(r.TRIANGLE_STRIP,0,4)};var s=["precision mediump float;","uniform sampler2D YTexture;","uniform sampler2D CBTexture;","uniform sampler2D CRTexture;","varying vec2 texCoord;","void main() {","float y = texture2D(YTexture, texCoord).r;","float cr = texture2D(CBTexture, texCoord).r - 0.5;","float cb = texture2D(CRTexture, texCoord).r - 0.5;","gl_FragColor = vec4(","y + 1.4 * cr,","y + -0.343 * cb - 0.711 * cr,","y + 1.765 * cb,","1.0",");","}"].join("\n"),o=["attribute vec2 vertex;","varying vec2 texCoord;","void main() {","texCoord = vertex;","gl_Position = vec4((vertex * 2.0 - 1.0) * vec2(1, -1), 0.0, 1.0);","}"].join("\n")},{}],8:[function(t,e,i){var r=t("eventemitter2").EventEmitter2,s=t("inherits"),o=t("./VideoLoader.js"),n=(t("./BitReader.js"),t("./Decoder.js")),h=t("./ScrollWatcher.js"),a=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),d=function(){return window.performance&&window.performance.now?window.performance.now():Date.now()},l=e.exports=function(t,e){e=e||{},this.url=t,this.videoIndex=0,this.el=this.canvas=e.canvas||document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.videoLoader=new o,this.autoplay=!!e.autoplay,this.autoplayOnScroll=!!e.autoplayOnScroll,this.preload=e.preload||"auto",this.repeat=!!e.repeat,this.decoder=new n(this.canvas),this.currentTime=0,this.on("show",this.play.bind(this)),this.on("unshow",this.pause.bind(this)),"none"!=this.preload&&this.doPreload(e.preloadTimeout),"scroll"==this.autoplay?h.add(this):this.autoplay&&this.load()};s(l,r),e.exports.ScrollWatcher=h,l.prototype.doPreload=function(t){if("meta"!==this.preload){if("auto"===this.preload&&this.videoLoader.add(this.url),"number"==typeof this.preload)if(this.preload>0&&Array.isArray(this.url)){var e=this.url.slice(0,this.preload);this.videoLoader.add(e)}else this.videoLoader.add(this.url);this.videoLoader.once("load",function(t){this.emit("preload"),this.loadVideo(t)}.bind(this)),"undefined"!=typeof t&&this.videoLoader.once("timeout",function(){this.emit("preloadTimeout")}.bind(this)),this.videoLoader.load(t)}},l.prototype.load=function(){this.playing||this.videoLoader.once("load",function(t){this.loadVideo(t)}.bind(this)),this.videoLoader.add(this.url),this.videoLoader.load()},l.prototype.loadVideo=function(t){this.videoIndex=t.index,this.decoder.loadBuffer(t.data),this.processFrame(),this.autoplay&&this.play()},l.prototype.play=function(){this.playing||(this.emit("play"),this.playing=!0,this.load(),this.animate())},l.prototype.pause=function(){this.playing&&(this.emit("pause"),this.playing=!1)},l.prototype.stop=function(){this.emit("stop"),this.loadVideo(this.videoLoader.findByIndex(0)),this.playing=!1},l.prototype.processFrame=function(){if(this.decoder.nextFrame())this.ctx.drawImage(this.decoder.canvas,0,0,this.decoder.width,this.decoder.height,0,0,this.canvas.width,this.canvas.height);else{var t=this.videoLoader.findByIndex(this.videoIndex+1);t?"loaded"===t.status?this.loadVideo(t):(this.pause(),this.videoLoader.once("load",function(t){t&&(this.loadVideo(t),this.play())}.bind(this)),"loading"!=t.status&&this.load()):(this.emit("ended"),this.repeat?(t=this.videoLoader.findByIndex(0),this.loadVideo(t)):this.stop())}},l.prototype.animate=function(){if(this.playing){var t=d();this.lastTime||(this.lastTime=t);var e=1e3/this.decoder.pictureRate,i=t-this.lastTime;i>e&&(this.processFrame(),this.lastTime=t-i%e,this.currentTime+=e,this.emit("timeupdate")),a(this.animate.bind(this))}}},{"./BitReader.js":2,"./Decoder.js":4,"./ScrollWatcher.js":5,"./VideoLoader.js":6,eventemitter2:10,inherits:11}],9:[function(t,e,i){var r=function(t,e,i,r){for(var s=0;64>s;s+=8,i+=r+8)e[i+0]=t[s+0],e[i+1]=t[s+1],e[i+2]=t[s+2],e[i+3]=t[s+3],e[i+4]=t[s+4],e[i+5]=t[s+5],e[i+6]=t[s+6],e[i+7]=t[s+7]},s=function(t,e,i,r){for(var s=0;64>s;s+=8,i+=r+8)e[i+0]+=t[s+0],e[i+1]+=t[s+1],e[i+2]+=t[s+2],e[i+3]+=t[s+3],e[i+4]+=t[s+4],e[i+5]+=t[s+5],e[i+6]+=t[s+6],e[i+7]+=t[s+7]},o=function(t,e,i,r){for(var s=0,o=0;8>o;o++){for(var n=0;8>n;n++){var h=t[s++];e[i++]=h>255?255:0>h?0:h}i+=r}},n=function(t,e,i,r){for(var s=0,o=0;8>o;o++){for(var n=0;8>n;n++){var h=t[s++]+e[i];e[i++]=h>255?255:0>h?0:h}i+=r}};e.exports.MaybeClampedUint8Array=window.Uint8ClampedArray||window.Uint8Array,window.Uint8ClampedArray?(e.exports.copyBlockToDestination=o,e.exports.addBlockToDestination=n):(e.exports.copyBlockToDestination=r,e.exports.addBlockToDestination=s),e.exports.copyValueToDestination=function(t,e,i,r){for(var s=0;64>s;s+=8,i+=r+8)e[i+0]=t,e[i+1]=t,e[i+2]=t,e[i+3]=t,e[i+4]=t,e[i+5]=t,e[i+6]=t,e[i+7]=t},e.exports.addValueToDestination=function(t,e,i,r){for(var s=0;64>s;s+=8,i+=r+8)e[i+0]+=t,e[i+1]+=t,e[i+2]+=t,e[i+3]+=t,e[i+4]+=t,e[i+5]+=t,e[i+6]+=t,e[i+7]+=t},e.exports.fillArray=function(t,e){for(var i=0,r=t.length;r>i;i++)t[i]=e}},{}],10:[function(t,e,i){!function(t){function e(){this._events={},this._conf&&r.call(this,this._conf)}function r(t){t&&(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),t.maxListeners&&(this._events.maxListeners=t.maxListeners),t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this.newListener=t.newListener),this.wildcard&&(this.listenerTree={}))}function s(t){this._events={},this.newListener=!1,r.call(this,t)}function o(t,e,i,r){if(!i)return[];var s,n,h,a,d,l,c,u=[],f=e.length,p=e[r],y=e[r+1];if(r===f&&i._listeners){if("function"==typeof i._listeners)return t&&t.push(i._listeners),[i];for(s=0,n=i._listeners.length;n>s;s++)t&&t.push(i._listeners[s]);return[i]}if("*"===p||"**"===p||i[p]){if("*"===p){for(h in i)"_listeners"!==h&&i.hasOwnProperty(h)&&(u=u.concat(o(t,e,i[h],r+1)));return u}if("**"===p){c=r+1===f||r+2===f&&"*"===y,c&&i._listeners&&(u=u.concat(o(t,e,i,f)));for(h in i)"_listeners"!==h&&i.hasOwnProperty(h)&&("*"===h||"**"===h?(i[h]._listeners&&!c&&(u=u.concat(o(t,e,i[h],f))),u=u.concat(o(t,e,i[h],r))):u=u.concat(h===y?o(t,e,i[h],r+2):o(t,e,i[h],r)));return u}u=u.concat(o(t,e,i[p],r+1))}if(a=i["*"],a&&o(t,e,a,r+1),d=i["**"])if(f>r){d._listeners&&o(t,e,d,f);for(h in d)"_listeners"!==h&&d.hasOwnProperty(h)&&(h===y?o(t,e,d[h],r+2):h===p?o(t,e,d[h],r+1):(l={},l[h]=d[h],o(t,e,{"**":l},r+1)))}else d._listeners?o(t,e,d,f):d["*"]&&d["*"]._listeners&&o(t,e,d["*"],f);return u}function n(t,e){t="string"==typeof t?t.split(this.delimiter):t.slice();for(var i=0,r=t.length;r>i+1;i++)if("**"===t[i]&&"**"===t[i+1])return;for(var s=this.listenerTree,o=t.shift();o;){if(s[o]||(s[o]={}),s=s[o],0===t.length){if(s._listeners){if("function"==typeof s._listeners)s._listeners=[s._listeners,e];else if(h(s._listeners)&&(s._listeners.push(e),!s._listeners.warned)){var n=a;"undefined"!=typeof this._events.maxListeners&&(n=this._events.maxListeners),
n>0&&s._listeners.length>n&&(s._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",s._listeners.length),console.trace())}}else s._listeners=e;return!0}o=t.shift()}return!0}var h=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=10;s.prototype.delimiter=".",s.prototype.setMaxListeners=function(t){this._events||e.call(this),this._events.maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t},s.prototype.event="",s.prototype.once=function(t,e){return this.many(t,1,e),this},s.prototype.many=function(t,e,i){function r(){0===--e&&s.off(t,r),i.apply(this,arguments)}var s=this;if("function"!=typeof i)throw new Error("many only accepts instances of Function");return r._origin=i,this.on(t,r),s},s.prototype.emit=function(){this._events||e.call(this);var t=arguments[0];if("newListener"===t&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var i=arguments.length,r=new Array(i-1),s=1;i>s;s++)r[s-1]=arguments[s];for(s=0,i=this._all.length;i>s;s++)this.event=t,this._all[s].apply(this,r)}if("error"===t&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var n;if(this.wildcard){n=[];var h="string"==typeof t?t.split(this.delimiter):t.slice();o.call(this,n,h,this.listenerTree,0)}else n=this._events[t];if("function"==typeof n){if(this.event=t,1===arguments.length)n.call(this);else if(arguments.length>1)switch(arguments.length){case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(var i=arguments.length,r=new Array(i-1),s=1;i>s;s++)r[s-1]=arguments[s];n.apply(this,r)}return!0}if(n){for(var i=arguments.length,r=new Array(i-1),s=1;i>s;s++)r[s-1]=arguments[s];for(var a=n.slice(),s=0,i=a.length;i>s;s++)this.event=t,a[s].apply(this,r);return a.length>0||!!this._all}return!!this._all},s.prototype.on=function(t,i){if("function"==typeof t)return this.onAny(t),this;if("function"!=typeof i)throw new Error("on only accepts instances of Function");if(this._events||e.call(this),this.emit("newListener",t,i),this.wildcard)return n.call(this,t,i),this;if(this._events[t]){if("function"==typeof this._events[t])this._events[t]=[this._events[t],i];else if(h(this._events[t])&&(this._events[t].push(i),!this._events[t].warned)){var r=a;"undefined"!=typeof this._events.maxListeners&&(r=this._events.maxListeners),r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}}else this._events[t]=i;return this},s.prototype.onAny=function(t){if("function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(t),this},s.prototype.addListener=s.prototype.on,s.prototype.off=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");var i,r=[];if(this.wildcard){var s="string"==typeof t?t.split(this.delimiter):t.slice();r=o.call(this,null,s,this.listenerTree,0)}else{if(!this._events[t])return this;i=this._events[t],r.push({_listeners:i})}for(var n=0;n<r.length;n++){var a=r[n];if(i=a._listeners,h(i)){for(var d=-1,l=0,c=i.length;c>l;l++)if(i[l]===e||i[l].listener&&i[l].listener===e||i[l]._origin&&i[l]._origin===e){d=l;break}if(0>d)continue;return this.wildcard?a._listeners.splice(d,1):this._events[t].splice(d,1),0===i.length&&(this.wildcard?delete a._listeners:delete this._events[t]),this}(i===e||i.listener&&i.listener===e||i._origin&&i._origin===e)&&(this.wildcard?delete a._listeners:delete this._events[t])}return this},s.prototype.offAny=function(t){var e,i=0,r=0;if(t&&this._all&&this._all.length>0){for(e=this._all,i=0,r=e.length;r>i;i++)if(t===e[i])return e.splice(i,1),this}else this._all=[];return this},s.prototype.removeListener=s.prototype.off,s.prototype.removeAllListeners=function(t){if(0===arguments.length)return!this._events||e.call(this),this;if(this.wildcard)for(var i="string"==typeof t?t.split(this.delimiter):t.slice(),r=o.call(this,null,i,this.listenerTree,0),s=0;s<r.length;s++){var n=r[s];n._listeners=null}else{if(!this._events[t])return this;this._events[t]=null}return this},s.prototype.listeners=function(t){if(this.wildcard){var i=[],r="string"==typeof t?t.split(this.delimiter):t.slice();return o.call(this,i,r,this.listenerTree,0),i}return this._events||e.call(this),this._events[t]||(this._events[t]=[]),h(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},s.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof define&&define.amd?define(function(){return s}):"object"==typeof i?i.EventEmitter2=s:window.EventEmitter2=s}()},{}],11:[function(t,e,i){e.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},{}],12:[function(t,e,i){var r=t("../jsmpeg/jsmpeg.js"),s=e.exports=function(t){this.el=document.createElement("div"),this.options=t||{},"undefined"==typeof this.options.autoplay&&(this.options.autoplay="scroll"),"undefined"==typeof this.options.preload&&(this.preload=1),this.videoInfo=null,this.player=null,this.video=null,this.endcard=null,this.ctrl=null,this.replayButton=null};s.prototype.open=function(){var t=new XMLHttpRequest;t.onreadystatechange=function(){t.readyState==t.DONE&&200==t.status&&(this.videoInfo=JSON.parse(t.response),this.render())}.bind(this),t.open("GET",this.options.src),t.send()},s.prototype.getVideoURL=function(){return this.videoInfo.url.map(function(t){if(/^(https?:)?\/\//.test(t))return t;var e=this.options.src.split("/").slice(0,-1).join("/");return""!==e?e+"/"+t:t}.bind(this))},s.prototype.render=function(){this.el.style.position="relative",this.el.style.margin=0,this.addPlayer(),this.options.mp4&&this.addVideo(),this.el.style.width=this.getWidth()+"px",this.el.style.height=this.getHeight()+"px",this.initEvents(),"none"===this.el.style.display&&(this.el.style.display="")},s.prototype.addPlayer=function(){this.player=new r(this.getVideoURL(),{repeat:!1,autoplay:this.options.autoplay,preload:this.options.preload,preloadTimeout:this.options.preloadTimeout}),this.player.canvas.style.zIndex=10,this.player.canvas.style.position="relative",this.player.canvas.width=this.getWidth(),this.player.canvas.height=this.getHeight(),this.el.appendChild(this.player.el)},s.prototype.addVideo=function(){this.video=document.createElement("video"),this.video.src=this.options.mp4,this.video.preload="none",this.video.style.zIndex=1,this.video.style.opacity=0,this.video.style.position="fixed",this.video.width=this.getWidth(),this.video.height=this.getHeight(),this.video.style.top=0,this.video.style.left=0,this.el.appendChild(this.video)},s.prototype.initEvents=function(){if(this.player.el.addEventListener("click",this.onClick.bind(this)),this.player.on("ended",this.showEndcard.bind(this)),this.player.on("preloadTimeout",this.onTimeout.bind(this)),this.options.mp4){this.video.addEventListener("play",function(){this.player.pause()}.bind(this)),this.video.addEventListener("pause",function(){this.player.play()}.bind(this)),this.video.addEventListener("ended",function(){this.cancelFullScreen(),this.showEndcard()}.bind(this));for(var t=["webkit","moz","ms",""],e=0;e<t.length;e++){var i=t[e]+"fullscreenchange";document.addEventListener(i,this.onFullScreenChange.bind(this),!1)}}},s.prototype.onTimeout=function(){this.showEndcard()},s.prototype.onClick=function(t){return this.player.playing?this.fullscreen():this.player.play(),t.preventDefault()},s.prototype.requestFullScreen=function(){this.video.requestFullScreen?this.video.requestFullScreen():this.video.webkitRequestFullScreen?this.video.webkitRequestFullScreen():this.video.webkitEnterFullscreen&&this.video.webkitEnterFullscreen()},s.prototype.cancelFullScreen=function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},s.prototype.fullscreen=function(){return this.options.mp4?(this.player.pause(),this.requestFullScreen(),this.video.play(),!0):!1},s.prototype.onFullScreenChange=function(){for(var t=["webkitFullscreenElement","mozFullscreenElement","msFullscreenElement","fullscreenElement"],e=!1,i=0;i<t.length;i++){var r=t[i];if(document[r]&&null!==document[r]){e=!0;break}}e?this.player.pause():(this.video.style.opacity=0,this.video.pause(),this.player.play())},s.prototype.getWidth=function(){return this.options.width||this.player.el.width},s.prototype.getHeight=function(){return this.options.height||this.player.el.height},s.prototype.showEndcard=function(){this.player.el.style.display="none",this.video.style.display="none",this.addEndcard(),this.replayButton.addEventListener("click",this.replay.bind(this))},s.prototype.addEndcard=function(){this.endcard=new Image,this.endcard.src=this.options.endcard,this.endcard.width=this.getWidth(),this.endcard.height=this.getHeight(),this.el.appendChild(this.endcard),this.addCtrl()},s.prototype.removeEndcard=function(){this.el.removeChild(this.endcard),this.el.removeChild(this.ctrl)},s.prototype.addCtrl=function(){this.ctrl=document.createElement("div"),this.ctrl.style.zIndex=100,this.ctrl.style.position="absolute",this.ctrl.style.width="100%",this.ctrl.style.height="40px",this.ctrl.style.bottom=0,this.ctrl.style.left=0,this.ctrl.style.opacity=.7,this.ctrl.style.background="#000",this.el.appendChild(this.ctrl),this.replayButton=document.createElement("button"),this.replayButton.innerHTML="Replay",this.replayButton.style.height="30px",this.replayButton.style.padding="5px",this.replayButton.style.margin="5px 8px",this.ctrl.appendChild(this.replayButton)},s.prototype.replay=function(){this.player.el.style.display="",this.video.style.display="",this.removeEndcard(),"undefined"!=typeof this.options.replayInline?this.player.play():(this.video.currentTime=0,this.fullscreen())}},{"../jsmpeg/jsmpeg.js":8}]},{},[1]);